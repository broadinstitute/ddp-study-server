{
  "validations": [
    # When using the Enroll My Adult Dependent flow, if a user enters an age at or above the AOM for their region in
    # the pre-qual but enters a date of birth that equates to <AOM for their region in the adult dependent consent,
    # an error message should appear under the consent DOB field.
    # Formally: CONSENT_DEPENDENT_DATE_OF_BIRTH >= 18 && CONSENT.AGE <= 18
    {
      "messageTemplate": {
        "templateType": "HTML",
        "templateText": "$singular_consent_dependent_validation",
        "variables": [
          {
            "name": "singular_consent_dependent_validation",
            "translations": [
              {
                "language": "en",
                "text": """Please check the date of birth you have entered. If the date is correct, then your dependent
                           is younger than the age required by local law to self-enroll in this study. In that case,
                           please return to the dashboard and click "Enroll my child" to begin a new enrollment for
                           your dependent, or contact us for help at (650) 561-6750 or
                           <a href="mailto:contact@projectsingular.org">contact@projectsingular.org</a>.
                        """
              }
            ]
          }
        ]
      },
      "stableIds": ["MRR_DATE_OF_BIRTH", "MRR_WHO_ENROLLING_COPY", "ENROLLING_DEPENDENT_AGE"],
      "precondition": """
                      user.studies["singular"].forms["MEDICAL_RECORD_RELEASE"].questions["MRR_WHO_ENROLLING_COPY"].isAnswered()
                      &&
                      user.studies["singular"].forms["MEDICAL_RECORD_RELEASE"].questions["MRR_WHO_ENROLLING_COPY"].answers.hasOption("DEPENDENT")
                      &&
                      user.studies["singular"].forms["ADD_PARTICIPANT_DEPENDENT"].questions["ENROLLING_DEPENDENT_AGE"].isAnswered()
                      &&
                      user.studies["singular"].forms["MEDICAL_RECORD_RELEASE"].questions["MRR_DATE_OF_BIRTH"].isAnswered()
                      """,
      "expression": """
                    user.studies["singular"].forms["ADD_PARTICIPANT_DEPENDENT"].questions["ENROLLING_DEPENDENT_AGE"].answers.value() >= 18
                    &&
                    user.studies["singular"].forms["MEDICAL_RECORD_RELEASE"].questions["MRR_DATE_OF_BIRTH"].answers.ageLessThan(18, YEARS)
                    """
    }
  ]
}