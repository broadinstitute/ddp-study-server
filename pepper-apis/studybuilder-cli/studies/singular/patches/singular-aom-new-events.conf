{
  "events": [
    ## after submitting new consent(s)
    {
      "trigger": {
        "type": "ACTIVITY_STATUS",
        "activityCode": "CONSENT_SELF",
        "statusType": "COMPLETE"
      },
      "action": {
        "type": "HIDE_ACTIVITIES",
        "activityCodes": ["CONSENT_PARENTAL", "CONSENT_ASSENT", "ABOUT_HEALTHY", "MEDICAL_RECORD_RELEASE", "CHILD_CONTACT", "MEDICAL_RECORD_FILE_UPLOAD", "PATIENT_SURVEY"]
      },
      "preconditionExpr": """user.studies["singular"].forms["CHILD_CONTACT"].isStatus("COMPLETE")""",
      "dispatchToHousekeeping": false,
      "order": 6
    },

    {
      "trigger": {
        "type": "ACTIVITY_STATUS",
        "activityCode": "CONSENT_SELF",
        "statusType": "COMPLETE"
      },
      "action": {
        "type": "ACTIVITY_INSTANCE_CREATION",
        "activityCode": "ABOUT_PATIENT"
      },
      "preconditionExpr": """user.studies["singular"].forms["CHILD_CONTACT"].isStatus("COMPLETE")""",
      "maxOccurrencesPerUser": 1,
      "dispatchToHousekeeping": false,
      "order": 7
    },

    //disable below event or add preconditionExpt and add one events
    {
      "trigger": {
        "type": "ACTIVITY_STATUS",
        "activityCode": "ABOUT_PATIENT",
        "statusType": "CREATED"
      },
      "action": {
        "type": "COPY_ANSWER",
        "copyFromPreviousInstance": true,
        "copyConfigPairs": []
      },
      "preconditionExpr": """!user.studies["singular"].forms["CHILD_CONTACT"].isStatus("COMPLETE")"""
      "order": 1,
      "dispatchToHousekeeping": false
    },

    //add event
    {
      "trigger": {
        "type": "ACTIVITY_STATUS",
        "activityCode": "ABOUT_PATIENT",
        "statusType": "CREATED"
      },
      "action": {
        "type": "COPY_ANSWER",
        "copyConfigPairs": [
          {
            "source": {
              "type": "ANSWER",
              "questionStableId": "WHO_ENROLLING_SELF"
            },
            "target": {
              "type": "ANSWER",
              "questionStableId": "ABOUT_PATIENT_WHO_ENROLLING_HIDDEN"
            }
          },
        ]
      },
      "preconditionExpr": """user.studies["singular"].forms["CHILD_CONTACT"].isStatus("COMPLETE")""",
      "maxOccurrencesPerUser": 1,
      "dispatchToHousekeeping": false,
      "order": 6
    }

    //release creation
    //update with precond expr or /disable and add again below event
    {
      "trigger": {
        "type": "ACTIVITY_STATUS",
        "activityCode": "ABOUT_PATIENT",
        "statusType": "COMPLETE"
      },
      "action": {
        "type": "ACTIVITY_INSTANCE_CREATION",
        "activityCode": "MEDICAL_RECORD_RELEASE"
      },
      "maxOccurrencesPerUser": 1,
      "dispatchToHousekeeping": false,
      "order": 1
      "preconditionExpr": """!user.studies["singular"].forms["CHILD_CONTACT"].isStatus("COMPLETE")"""
    },

    //add event
    {
      "trigger": {
        "type": "ACTIVITY_STATUS",
        "activityCode": "ABOUT_PATIENT",
        "statusType": "COMPLETE"
      },
      "action": {
        "type": "ACTIVITY_INSTANCE_CREATION",
        "activityCode": "MEDICAL_RECORD_RELEASE"
      },
      "maxOccurrencesPerUser": 2,
      "dispatchToHousekeeping": false,
      "order": 2
      "preconditionExpr": """user.studies["singular"].forms["CHILD_CONTACT"].isStatus("COMPLETE")"""
    },

    {
      "trigger": {
        "type": "ACTIVITY_STATUS",
        "activityCode": "MEDICAL_RECORD_RELEASE",
        "statusType": "CREATED"
      },
      "action": {
        "type": "COPY_ANSWER",
        "copyConfigPairs": [
          {
            "source": {
              "type": "ANSWER",
              "questionStableId": "WHO_ENROLLING_SELF"
            },
            "target": {
              "type": "ANSWER",
              "questionStableId": "MRR_WHO_ENROLLING_COPY"
            }
          },
        ]
      },
      "preconditionExpr": """user.studies["singular"].forms["CHILD_CONTACT"].isStatus("COMPLETE")"""
      "maxOccurrencesPerUser": 1,
      "dispatchToHousekeeping": false,
      "order": 6
    },

    //update below event and add precond expr
    {
      "trigger": {
        "type": "ACTIVITY_STATUS",
        "activityCode": "MEDICAL_RECORD_RELEASE",
        "statusType": "CREATED"
      },
      "action": {
        "type": "COPY_ANSWER",
        "copyFromPreviousInstance": true,
        "copyConfigPairs": []
      },
      "order": 1,
      "dispatchToHousekeeping": false,
      "preconditionExpr": """user.studies["singular"].forms["CHILD_CONTACT"].isStatus("COMPLETE")"""
    }

    //update below event
    //add below event to create MEDICAL_RECORD_FILE_UPLOAD
    {
      "trigger": {
        "type": "ACTIVITY_STATUS",
        "activityCode": "MEDICAL_RECORD_RELEASE",
        "statusType": "COMPLETE"
      },
      "action": {
        "type": "ACTIVITY_INSTANCE_CREATION",
        "activityCode": "MEDICAL_RECORD_FILE_UPLOAD"
      },
      "dispatchToHousekeeping": false,
      "order": 1
    },

    //update below event to add precond
    {
      "trigger": {
        "type": "ACTIVITY_STATUS",
        "activityCode": "MEDICAL_RECORD_FILE_UPLOAD",
        "statusType": "CREATED"
      },
      "action": {
        "type": "COPY_ANSWER",
        "copyFromPreviousInstance": true,
        "copyConfigPairs": []
      },
      "order": 1,
      "dispatchToHousekeeping": false,
      "preconditionExpr": """!user.studies["singular"].forms["CHILD_CONTACT"].isStatus("COMPLETE")"""
    },

    //PATIENT_SURVEY
    //update below event to add precond
    {
      "trigger": {
        "type": "ACTIVITY_STATUS",
        "activityCode": "MEDICAL_RECORD_FILE_UPLOAD",
        "statusType": "COMPLETE"
      },
      "action": {
        "type": "ACTIVITY_INSTANCE_CREATION",
        "activityCode": "PATIENT_SURVEY"
      },
      "maxOccurrencesPerUser": 1,
      "dispatchToHousekeeping": false,
      "order": 1,
      "preconditionExpr": """!user.studies["singular"].forms["CHILD_CONTACT"].isStatus("COMPLETE")"""
    },

    //add event
    {
      "trigger": {
        "type": "ACTIVITY_STATUS",
        "activityCode": "MEDICAL_RECORD_FILE_UPLOAD",
        "statusType": "COMPLETE"
      },
      "action": {
        "type": "ACTIVITY_INSTANCE_CREATION",
        "activityCode": "PATIENT_SURVEY"
      },
      "maxOccurrencesPerUser": 2,
      "dispatchToHousekeeping": false,
      "order": 2
      "preconditionExpr": """user.studies["singular"].forms["CHILD_CONTACT"].isStatus("COMPLETE")"""
    },

    {
      "trigger": {
        "type": "ACTIVITY_STATUS",
        "activityCode": "PATIENT_SURVEY",
        "statusType": "CREATED"
      },
      "action": {
        "type": "COPY_ANSWER",
        "copyConfigPairs": [
          {
            "source": {
              "type": "ANSWER",
              "questionStableId": "WHO_ENROLLING_SELF"
            },
            "target": {
              "type": "ANSWER",
              "questionStableId": "PATIENT_SURVEY_WHO_ENROLLING_HIDDEN"
            }
          }
        ]
      },
      "preconditionExpr": """user.studies["singular"].forms["CHILD_CONTACT"].isStatus("COMPLETE")"""
      "dispatchToHousekeeping": false,
      "order": 4
    }
  ]
}