{
  include required("../../snippets/composite-question.conf"),
  "stableId": ${id.q.viral_test_list},
  "allowMultiple": true,
  "childOrientation": "VERTICAL",
  "promptTemplate": {
    "templateType": "HTML",
    "templateText": "$viral_test_list_prompt",
    "variables": [
      {
        "name": "viral_test_list_prompt",
        "translations": [
          { "language": "en", "text": "" }, // No prompt
          { "language": "es", "text": "" },
          { "language": "ht", "text": "" }
        ]
      }
    ]
  },
  "additionalItemTemplate": null,
  "addButtonTemplate": {
    "templateType": "TEXT",
    "templateText": "$viral_test_list_add_button",
    "variables": [
      {
        "name": "viral_test_list_add_button",
        "translations": [
          { "language": "en", "text": ${i18n.en.viral_test_list_add} },
          { "language": "es", "text": ${i18n.es.viral_test_list_add} },
          { "language": "ht", "text": ${i18n.ht.viral_test_list_add} }
        ]
      }
    ]
  },
  "children": [
    {
      include required("../../snippets/picklist-question-single-list.conf"),
      "stableId": ${id.q.viral_test_result},
      "promptTemplate": {
        "templateType": "HTML",
        "templateText": "$viral_test_result_prompt"
        "variables": [
          {
            "name": "viral_test_result_prompt",
            "translations": [
              { "language": "en", "text": ${i18n.en.viral_test_result_prompt} },
              { "language": "es", "text": ${i18n.es.viral_test_result_prompt} },
              { "language": "ht", "text": ${i18n.ht.viral_test_result_prompt} }
            ]
          }
        ]
      },
      "picklistOptions": [
        {
          "stableId": "POS",
          "optionLabelTemplate": {
            "templateType": "TEXT",
            "templateText": "$viral_test_result_pos",
            "variables": [
              {
                "name": "viral_test_result_pos",
                "translations": [
                  { "language": "en", "text": ${i18n.en.option.pos} },
                  { "language": "es", "text": ${i18n.es.option.pos} },
                  { "language": "ht", "text": ${i18n.ht.option.pos} }
                ]
              }
            ]
          }
        },
        {
          "stableId": "NEG",
          "optionLabelTemplate": {
            "templateType": "TEXT",
            "templateText": "$viral_test_result_neg",
            "variables": [
              {
                "name": "viral_test_result_neg",
                "translations": [
                  { "language": "en", "text": ${i18n.en.option.neg} },
                  { "language": "es", "text": ${i18n.es.option.neg} },
                  { "language": "ht", "text": ${i18n.ht.option.neg} }
                ]
              }
            ]
          }
        },
        {
          "stableId": "DK",
          "optionLabelTemplate": {
            "templateType": "TEXT",
            "templateText": "$viral_test_result_dk",
            "variables": [
              {
                "name": "viral_test_result_dk",
                "translations": [
                  { "language": "en", "text": ${i18n.en.option.dk} },
                  { "language": "es", "text": ${i18n.es.option.dk} },
                  { "language": "ht", "text": ${i18n.ht.option.dk} }
                ]
              }
            ]
          }
        }
      ]
    }
    {
      include required("../../snippets/date-question.conf"),
      "stableId": ${id.q.viral_test_date},
      "promptTemplate": {
        "templateType": "HTML",
        "templateText": "$viral_test_date_prompt"
        "variables": [
          {
            "name": "viral_test_date_prompt",
            "translations": [
              { "language": "en", "text": ${i18n.en.viral_test_date_prompt} },
              { "language": "es", "text": ${i18n.es.viral_test_date_prompt} },
              { "language": "ht", "text": ${i18n.ht.viral_test_date_prompt} }
            ]
          }
        ]
      },
      "renderMode": "PICKLIST",
      "fields": [
        "MONTH",
        "DAY",
        "YEAR"
      ],
      "picklistConfig": {
        "useMonthNames": true,
        "yearsForward": 100,
        "yearsBack": 0,
        "yearAnchor": 2019,
        "allowFutureYears": false,
        "firstSelectedYear": 2020
      },
      "validations": [
        {
          "ruleType": "MONTH_REQUIRED",
          "hintTemplate": {
            "templateType": "TEXT",
            "templateText": "$viral_test_date_month_hint",
            "variables": [
              {
                "name": "viral_test_date_month_hint",
                "translations": [
                  { "language": "en", "text": ${i18n.en.hint.month_required} },
                  { "language": "es", "text": ${i18n.es.hint.month_required} },
                  { "language": "ht", "text": ${i18n.ht.hint.month_required} }
                ]
              }
            ]
          }
        },
        {
          "ruleType": "YEAR_REQUIRED",
          "hintTemplate": {
            "templateType": "TEXT",
            "templateText": "$viral_test_date_year_hint",
            "variables": [
              {
                "name": "viral_test_date_year_hint",
                "translations": [
                  { "language": "en", "text": ${i18n.en.hint.year_required} },
                  { "language": "es", "text": ${i18n.es.hint.year_required} },
                  { "language": "ht", "text": ${i18n.ht.hint.year_required} }
                ]
              }
            ]
          }
        },
        {
          "ruleType": "DATE_RANGE",
          "startDate": "1920-01-01",
          "endDate": null,
          "useTodayAsEnd": true,
          "hintTemplate": {
            "templateType": "TEXT",
            "templateText": "$viral_test_date_range_hint",
            "variables": [
              {
                "name": "viral_test_date_range_hint",
                "translations": [
                  { "language": "en", "text": ${i18n.en.hint.date_range} },
                  { "language": "es", "text": ${i18n.es.hint.date_range} },
                  { "language": "ht", "text": ${i18n.ht.hint.date_range} }
                ]
              }
            ]
          }
        }
      ]
    }
  ]
}
