
{
  "tenant": {
    "domain": ${auth0.domain},
    "mgmtClientId": ${auth0.mgmtClientId},
    "mgmtSecret": ${auth0.mgmtSecret}
  },

  "umbrella": {
    "name": "RAREX",
    "guid": "rarex"
  },

  "study": {
    "name": "rarexproject",
    "guid": "rarex",
    "studyEmail": "support@rare-x.org",
    "baseWebUrl": ${baseWebUrl},
    "irbPassword": ${irbPassword},
    "plusCodePrecision": "MEDIUM",
    "shareParticipantLocation": false
  },

  "client": {
    "name": "rarex-angular-client",
    "id": ${auth0.clientId},
    "secret": ${auth0.clientSecret},
    "passwordRedirectUrl": ${passwordRedirectUrl}
  },

  include required("sendgrid-emails.conf"),

  "adminUser": {
    "guid": "PEPPERRAREXADMINUSER"
  },

  "governance": {
    "shouldCreateGovernedUserExpr": "false",
    "ageOfMajorityRules": []
  },

  "studyDetails": [],

  "supportedLanguages": [
    {
      "language": "en",
      "name" : "English",
      "isDefault" : true
    }
  ],

  "sendgrid": {
    "apiKey": ${sendgridApiKey},
    "fromName": ${sendgridFromName},
    "fromEmail": ${sendgridFromEmail},
    "defaultSalutation": ${sendgridDefaultSalutation}
  },

  "settings": {
    "analyticsEnabled": true,
    "analyticsToken": ${analyticsToken}
  },

  "kits": [],

  "activities": [
    {
      "filepath": "prequal.conf",
      "mappings": [],
      "validations": [
        # complex validation for requiring parental consent
        {
          "messageTemplate": {
            "templateType": "HTML",
            "templateText": "$rarex_prequal_validation_need_parental_consent",
            "variables": [
              {
                "name": "rarex_prequal_validation_need_parental_consent",
                "translations": [
                  {
                    "language": "en",
                    "text": """
                      In order to participate in the project, a parent or guardian needs to help you.
                      When your parent or guardian is with you, click back and select "I am the parent or guardian of a
                      patient who has been diagnosed with a rare disorder" and complete the registration together.
                    """
                  }
                ]
              }
            ]
          },
          "stableIds": ["SELF_CURRENT_AGE", "SELF_COUNTRY", "SELF_STATE", "SELF_PROVINCE"],
          "precondition": """
            user.studies["rarex"].forms["PREQUAL"].questions["PREQUAL_SELF_DESCRIBE"].answers.hasOption("DIAGNOSED")
            && user.studies["rarex"].forms["PREQUAL"].questions["SELF_CURRENT_AGE"].isAnswered()
            && user.studies["rarex"].forms["PREQUAL"].questions["SELF_COUNTRY"].isAnswered()
            && (
              !user.studies["rarex"].forms["PREQUAL"].questions["SELF_COUNTRY"].answers.hasAnyOption("US", "CA")
              || (
                user.studies["rarex"].forms["PREQUAL"].questions["SELF_COUNTRY"].answers.hasOption("US")
                && user.studies["rarex"].forms["PREQUAL"].questions["SELF_STATE"].isAnswered()
              ) || (
                user.studies["rarex"].forms["PREQUAL"].questions["SELF_COUNTRY"].answers.hasOption("CA")
                && user.studies["rarex"].forms["PREQUAL"].questions["SELF_PROVINCE"].isAnswered()
              )
            )
          """,
          "expression": """
            ( user.studies["rarex"].forms["PREQUAL"].questions["SELF_COUNTRY"].answers.hasOption("US")
              && (
                ( user.studies["rarex"].forms["PREQUAL"].questions["SELF_STATE"].answers.hasOption("AL")
                  && user.studies["rarex"].forms["PREQUAL"].questions["SELF_CURRENT_AGE"].answers.value() < 19
                ) || (
                  !user.studies["rarex"].forms["PREQUAL"].questions["SELF_STATE"].answers.hasOption("AL")
                  && user.studies["rarex"].forms["PREQUAL"].questions["SELF_CURRENT_AGE"].answers.value() < 18
                )
              )
            ) || (
              user.studies["rarex"].forms["PREQUAL"].questions["SELF_COUNTRY"].answers.hasOption("CA")
              && (
                ( user.studies["rarex"].forms["PREQUAL"].questions["SELF_PROVINCE"].answers.hasAnyOption("BC", "NB", "NL", "NT", "NS", "NU", "YT")
                  && user.studies["rarex"].forms["PREQUAL"].questions["SELF_CURRENT_AGE"].answers.value() < 19
                ) || (
                  user.studies["rarex"].forms["PREQUAL"].questions["SELF_PROVINCE"].answers.hasAnyOption("AB", "MB", "ON", "PE", "QC", "SK")
                  && user.studies["rarex"].forms["PREQUAL"].questions["SELF_CURRENT_AGE"].answers.value() < 18
                )
              )
            ) || (
              user.studies["rarex"].forms["PREQUAL"].questions["SELF_COUNTRY"].answers.hasOption("PR")
              && user.studies["rarex"].forms["PREQUAL"].questions["SELF_CURRENT_AGE"].answers.value() < 21
            ) || (
              !user.studies["rarex"].forms["PREQUAL"].questions["SELF_COUNTRY"].answers.hasAnyOption("US", "CA", "PR")
              && user.studies["rarex"].forms["PREQUAL"].questions["SELF_CURRENT_AGE"].answers.value() < 18
            )
          """
        }
      ]
    },
    {
      "filepath": "add-participant.conf",
      "mappings": [],
      "validations": [
        # complex validation for requiring parental consent
        {
          "messageTemplate": {
            "templateType": "HTML",
            "templateText": "$rarex_prequal_validation_need_parental_consent",
            "variables": [
              {
                "name": "rarex_prequal_validation_need_parental_consent",
                "translations": [
                  {
                    "language": "en",
                    "text": """
                      In order to participate in the project, a parent or guardian needs to help you.
                      When your parent or guardian is with you, click back and select "I am the parent or guardian of a
                      patient who has been diagnosed with a rare disorder" and complete the registration together.
                    """
                  }
                ]
              }
            ]
          },
          "stableIds": ["PARTICIPANT_AGE", "PARTICIPANT_COUNTRY", "PARTICIPANT_STATE", "PARTICIPANT_PROVINCE"],
          "precondition": """
            user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_RELATIONSHIP"].answers.hasOption("SELF")
            && user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_AGE"].isAnswered()
            && user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_COUNTRY"].isAnswered()
            && (
              !user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_COUNTRY"].answers.hasAnyOption("US", "CA")
              || (
                user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_COUNTRY"].answers.hasOption("US")
                && user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_STATE"].isAnswered()
              ) || (
                user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_COUNTRY"].answers.hasOption("CA")
                && user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_STATE"].isAnswered()
              )
            )
          """,
          "expression": """
            ( user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_COUNTRY"].answers.hasOption("US")
              && (
                ( user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_STATE"].answers.hasOption("AL")
                  && user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_AGE"].answers.value() < 19
                ) || (
                  !user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_STATE"].answers.hasOption("AL")
                  && user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_AGE"].answers.value() < 18
                )
              )
            ) || (
              user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_COUNTRY"].answers.hasOption("CA")
              && (
                ( user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_PROVINCE"].answers.hasAnyOption("BC", "NB", "NL", "NT", "NS", "NU", "YT")
                  && user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_AGE"].answers.value() < 19
                ) || (
                  user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_PROVINCE"].answers.hasAnyOption("AB", "MB", "ON", "PE", "QC", "SK")
                  && user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_AGE"].answers.value() < 18
                )
              )
            ) || (
              user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_COUNTRY"].answers.hasOption("PR")
              && user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_AGE"].answers.value() < 21
            ) || (
              !user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_COUNTRY"].answers.hasAnyOption("US", "CA", "PR")
              && user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_AGE"].answers.value() < 18
            )
          """
        },
        {
          "messageTemplate": {
            "templateType": "HTML",
            "templateText": "$rarex_add_participant_validation_child_self_consent",
            "variables": [
              {
                "name": "rarex_add_participant_validation_child_self_consent",
                "translations": [
                  {
                    "language": "en",
                    "text": "In order to participate in the project, the patient or another individual with legal authority to act on behalf of the patient must register the patient."
                  }
                ]
              }
            ]
          },
          "stableIds": ["PARTICIPANT_AGE", "PARTICIPANT_COUNTRY", "PARTICIPANT_STATE", "PARTICIPANT_PROVINCE", "LEGAL_AUTHORITY"],
          "precondition": """
            user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_RELATIONSHIP"].answers.hasAnyOption("PARENT", "GUARDIAN")
            && user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_AGE"].isAnswered()
            && user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_COUNTRY"].isAnswered()
            && (
              !user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_COUNTRY"].answers.hasAnyOption("US", "CA")
              || (
                user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_COUNTRY"].answers.hasOption("US")
                && user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_STATE"].isAnswered()
              ) || (
                user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_COUNTRY"].answers.hasOption("CA")
                && user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_PROVINCE"].isAnswered()
              )
            )
            && user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["LEGAL_AUTHORITY"].answers.hasOption("NO")
          """,
          "expression": """
            (( user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_COUNTRY"].answers.hasOption("US")
              && (
                ( user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_STATE"].answers.hasOption("AL")
                  && user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_AGE"].answers.value() >= 19
                ) || (
                  !user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_STATE"].answers.hasOption("AL")
                  && user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_AGE"].answers.value() >= 18
                )
              )
            ) || (
              user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_COUNTRY"].answers.hasOption("CA")
              && (
                ( user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_PROVINCE"].answers.hasAnyOption("BC", "NB", "NL", "NT", "NS", "NU", "YT")
                  && user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_AGE"].answers.value() >= 19
                ) || (
                  user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_PROVINCE"].answers.hasAnyOption("AB", "MB", "ON", "PE", "QC", "SK")
                  && user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_AGE"].answers.value() >= 18
                )
              )
            ) || (
              user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_COUNTRY"].answers.hasOption("PR")
              && user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_AGE"].answers.value() >= 21
            ) || (
              !user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_COUNTRY"].answers.hasAnyOption("US", "CA", "PR")
              && user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_AGE"].answers.value() >= 18
            )) && user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["LEGAL_AUTHORITY"].answers.hasOption("NO")
          """
        }
      ]
    },
    {
      "filepath": "consent-self.conf",
      "mappings": [
        {
          "type": "DATE_OF_BIRTH",
          "stableId": "CONSENT_DOB"
        }
      ],
      "validations": []
    },
    {
      "filepath": "consent-parental.conf",
      "mappings": [
        {
          "type": "DATE_OF_BIRTH",
          "stableId": "PARENTAL_CONSENT_DOB"
        }
      ],
      "validations": []
    },
    {
      "filepath": "consent-parental-assent.conf",
      "mappings": [
        {
          "type": "DATE_OF_BIRTH",
          "stableId": "PARENTAL_ASSENT_CHILD_DOB"
        }
      ],
      "validations": []
    },
    {
      "filepath": "consent-lar.conf",
      "mappings": [
        {
          "type": "DATE_OF_BIRTH",
          "stableId": "LAR_CONSENT_PATIENT_DOB"
        }
      ],
      "validations": []
    },
    {
      "filepath": "consent-lar-assent.conf",
      "mappings": [
        {
          "type": "DATE_OF_BIRTH",
          "stableId": "LAR_CONSENT_ASSENT_PATIENT_DOB"
        }
      ],
      "validations": []
    },
    {
      "filepath": "legacy.conf",
      "mappings": [],
      "validations": []
    },
    {
      "filepath": "general-information.conf",
      "mappings": [],
      "validations": []
    },
    {
      "filepath": "data-sharing.conf",
      "mappings": [],
      "validations": []
    },
    {
      "filepath": "health-and-development.conf",
      "mappings": [],
      "validations": []
    },
    {
      "filepath": "quality-of-life.conf",
      "mappings": [],
      "validations": []
    },
    {
      "filepath": "quality-of-life-child.conf",
      "mappings": [],
      "validations": []
    },
    {
      "filepath": "quality-of-life-patient.conf",
      "mappings": [],
      "validations": []
    },
    {
      "filepath": "family-member.conf",
      "mappings": [],
      "validations": []
    }
  ],

  "activityTimestamp": null,

  "activityStatusIcons": [],

  "pdfs": [
    {
      "name": "rarex-consent-self",
      "filename": "consent",
      "displayName": "RARE-X consent pdf",
      "mapping": {
        "type": "CONSENT"
      },
      "versions": [
        {
          "tag": "v1",
          "start": null,
          "end": null,
          "sources": [
            {
              "type": "ACTIVITY",
              "activityCode": "CONSENT",
              "versionTag": "v1"
            }
          ],
          "files": [
            {
              "filepath": "pdfs/adult-icf.pdf",
              "type": "CUSTOM",
              "substitutions": [
                {
                  "type": "BOOLEAN",
                  "field": "follow_up_yes",
                  "activityCode": "CONSENT",
                  "questionStableId": "CONSENT_AGREE_FOLLOW_UP",
                  "checkIfFalse": false
                },
                {
                  "type": "BOOLEAN",
                  "field": "follow_up_no",
                  "activityCode": "CONSENT",
                  "questionStableId": "CONSENT_AGREE_FOLLOW_UP",
                  "checkIfFalse": true
                },
                {
                  "type": "BOOLEAN",
                  "field": "contact_result_yes",
                  "activityCode": "CONSENT",
                  "questionStableId": "CONSENT_AGREE_CONTACT_RESULT",
                  "checkIfFalse": false
                },
                {
                  "type": "BOOLEAN",
                  "field": "contact_result_no",
                  "activityCode": "CONSENT",
                  "questionStableId": "CONSENT_AGREE_CONTACT_RESULT",
                  "checkIfFalse": true
                },
                {
                  "type": "TEXT",
                  "field": "first_name",
                  "activityCode": "CONSENT",
                  "questionStableId": "CONSENT_SIGNATURE_FIRST_NAME"
                },
                {
                  "type": "TEXT",
                  "field": "last_name",
                  "activityCode": "CONSENT",
                  "questionStableId": "CONSENT_SIGNATURE_LAST_NAME"
                },
                {
                  "type": "TEXT",
                  "field": "signature",
                  "activityCode": "CONSENT",
                  "questionStableId": "CONSENT_SELF_SIGNATURE"
                },
                {
                  "type": "ACTIVITY_DATE",
                  "field": "date",
                  "activityCode": "CONSENT",
                },
                {
                  "type": "TEXT",
                  "field": "witness_printed_name",
                  "activityCode": "CONSENT",
                  "questionStableId": "CONSENT_IMPARTIAL_WITNESS_NAME"
                },
                {
                  "type": "TEXT",
                  "field": "witness_signature",
                  "activityCode": "CONSENT",
                  "questionStableId": "CONSENT_IMPARTIAL_WITNESS_SIGNATURE"
                },
                {
                  "type": "ACTIVITY_DATE",
                  "field": "witness_date",
                  "activityCode": "CONSENT",
                },
              ]
            }
          ]
        }
      ]
    },
    {
      "name": "rarex-consent-parental",
      "filename": "consent-parental",
      "displayName": "RARE-X parental consent pdf",
      "versions": [
        {
          "tag": "v1",
          "start": null,
          "end": null,
          "sources": [
            {
              "type": "ACTIVITY",
              "activityCode": "PARENTAL_CONSENT",
              "versionTag": "v1"
            }
          ],
          "files": [
            {
              "filepath": "pdfs/parent-legal-guardian-icf.pdf",
              "type": "CUSTOM",
              "substitutions": [
                {
                  "type": "BOOLEAN",
                  "field": "follow_up_yes",
                  "activityCode": "PARENTAL_CONSENT",
                  "questionStableId": "PARENTAL_CONSENT_AGREE_FOLLOW_UP",
                  "checkIfFalse": false
                },
                {
                  "type": "BOOLEAN",
                  "field": "follow_up_no",
                  "activityCode": "PARENTAL_CONSENT",
                  "questionStableId": "PARENTAL_CONSENT_AGREE_FOLLOW_UP",
                  "checkIfFalse": true
                },
                {
                  "type": "BOOLEAN",
                  "field": "contact_result_yes",
                  "activityCode": "PARENTAL_CONSENT",
                  "questionStableId": "PARENTAL_CONSENT_AGREE_CONTACT_RESULT",
                  "checkIfFalse": false
                },
                {
                  "type": "BOOLEAN",
                  "field": "contact_result_no",
                  "activityCode": "PARENTAL_CONSENT",
                  "questionStableId": "PARENTAL_CONSENT_AGREE_CONTACT_RESULT",
                  "checkIfFalse": true
                },
                {
                  "type": "TEXT",
                  "field": "child_first_name",
                  "activityCode": "PARENTAL_CONSENT",
                  "questionStableId": "PARENTAL_CONSENT_CHILD_FIRSTNAME"
                },
                {
                  "type": "TEXT",
                  "field": "child_last_name",
                  "activityCode": "PARENTAL_CONSENT",
                  "questionStableId": "PARENTAL_CONSENT_CHILD_LASTNAME"
                },
                {
                  "type": "TEXT",
                  "field": "parent_first_name",
                  "activityCode": "PARENTAL_CONSENT",
                  "questionStableId": "PARENTAL_CONSENT_PARENT_FIRSTNAME"
                },
                {
                  "type": "TEXT",
                  "field": "parent_last_name",
                  "activityCode": "PARENTAL_CONSENT",
                  "questionStableId": "PARENTAL_CONSENT_PARENT_LASTNAME"
                },
                {
                  "type": "TEXT",
                  "field": "parent_signature",
                  "activityCode": "PARENTAL_CONSENT",
                  "questionStableId": "PARENTAL_CONSENT_SIGNATURE"
                },
                {
                  "type": "ACTIVITY_DATE",
                  "field": "parent_date",
                  "activityCode": "PARENTAL_CONSENT"
                },
                {
                  "type": "PICKLIST",
                  "field": "parent_relationship",
                  "activityCode": "PARENTAL_CONSENT",
                  "questionStableId": "PARENTAL_CONSENT_RELATIONSHIP"
                },
              ]
            }
          ]
        }
      ]
    },
    {
      "name": "rarex-consent-parental-assent",
      "filename": "consent-assent",
      "displayName": "RARE-X parental consent assent pdf",
      "versions": [
        {
          "tag": "v1",
          "start": null,
          "end": null,
          "sources": [
            {
              "type": "ACTIVITY",
              "activityCode": "CONSENT_ASSENT",
              "versionTag": "v1"
            }
          ],
          "files": [
            {
              "filepath": "pdfs/parent-legal-guardian-icf.pdf",
              "type": "CUSTOM",
              "substitutions": [
                {
                  "type": "BOOLEAN",
                  "field": "follow_up_yes",
                  "activityCode": "CONSENT_ASSENT",
                  "questionStableId": "CONSENT_ASSENT_AGREE_FOLLOW_UP",
                  "checkIfFalse": false
                },
                {
                  "type": "BOOLEAN",
                  "field": "follow_up_no",
                  "activityCode": "CONSENT_ASSENT",
                  "questionStableId": "CONSENT_ASSENT_AGREE_FOLLOW_UP",
                  "checkIfFalse": true
                },
                {
                  "type": "BOOLEAN",
                  "field": "contact_result_yes",
                  "activityCode": "CONSENT_ASSENT",
                  "questionStableId": "CONSENT_ASSENT_AGREE_CONTACT_RESULT",
                  "checkIfFalse": false
                },
                {
                  "type": "BOOLEAN",
                  "field": "contact_result_no",
                  "activityCode": "CONSENT_ASSENT",
                  "questionStableId": "CONSENT_ASSENT_AGREE_CONTACT_RESULT",
                  "checkIfFalse": true
                },
                {
                  "type": "TEXT",
                  "field": "child_first_name",
                  "activityCode": "CONSENT_ASSENT",
                  "questionStableId": "PARENTAL_ASSENT_CHILD_FIRSTNAME"
                },
                {
                  "type": "TEXT",
                  "field": "child_last_name",
                  "activityCode": "CONSENT_ASSENT",
                  "questionStableId": "PARENTAL_ASSENT_CHILD_LASTNAME"
                },
                {
                  "type": "TEXT",
                  "field": "parent_first_name",
                  "activityCode": "CONSENT_ASSENT",
                  "questionStableId": "PARENTAL_ASSENT_PARENT_FIRSTNAME"
                },
                {
                  "type": "TEXT",
                  "field": "parent_last_name",
                  "activityCode": "CONSENT_ASSENT",
                  "questionStableId": "PARENTAL_ASSENT_PARENT_LASTNAME"
                },
                {
                  "type": "TEXT",
                  "field": "parent_signature",
                  "activityCode": "CONSENT_ASSENT",
                  "questionStableId": "CONSENT_ASSENT_PARENT_SIGNATURE"
                },
                {
                  "type": "ACTIVITY_DATE",
                  "field": "parent_date",
                  "activityCode": "CONSENT_ASSENT"
                },
                {
                  "type": "PICKLIST",
                  "field": "parent_relationship",
                  "activityCode": "CONSENT_ASSENT",
                  "questionStableId": "CONSENT_ASSENT_RELATIONSHIP"
                },
              ]
            }
          ]
        }
      ]
    },
    {
      "name": "rarex-consent-lar",
      "filename": "consent-lar",
      "displayName": "RARE-X consent LAR pdf",
      "versions": [
        {
          "tag": "v1",
          "start": null,
          "end": null,
          "sources": [
            {
              "type": "ACTIVITY",
              "activityCode": "LAR_CONSENT",
              "versionTag": "v1"
            }
          ],
          "files": [
            {
              "filepath": "pdfs/lar-icf.pdf",
              "type": "CUSTOM",
              "substitutions": [
                {
                  "type": "BOOLEAN",
                  "field": "follow_up_yes",
                  "activityCode": "LAR_CONSENT",
                  "questionStableId": "LAR_CONSENT_AGREE_FOLLOW_UP",
                  "checkIfFalse": false
                },
                {
                  "type": "BOOLEAN",
                  "field": "follow_up_no",
                  "activityCode": "LAR_CONSENT",
                  "questionStableId": "LAR_CONSENT_AGREE_FOLLOW_UP",
                  "checkIfFalse": true
                },
                {
                  "type": "BOOLEAN",
                  "field": "contact_result_yes",
                  "activityCode": "LAR_CONSENT",
                  "questionStableId": "LAR_CONSENT_AGREE_CONTACT_RESULT",
                  "checkIfFalse": false
                },
                {
                  "type": "BOOLEAN",
                  "field": "contact_result_no",
                  "activityCode": "LAR_CONSENT",
                  "questionStableId": "LAR_CONSENT_AGREE_CONTACT_RESULT",
                  "checkIfFalse": true
                },
                {
                  "type": "TEXT",
                  "field": "participant_first_name",
                  "activityCode": "LAR_CONSENT",
                  "questionStableId": "LAR_CONSENT_PATIENT_FIRSTNAME"
                },
                {
                  "type": "TEXT",
                  "field": "participant_last_name",
                  "activityCode": "LAR_CONSENT",
                  "questionStableId": "LAR_CONSENT_PATIENT_LASTNAME"
                },
                {
                  "type": "TEXT",
                  "field": "lar_first_name",
                  "activityCode": "LAR_CONSENT",
                  "questionStableId": "LAR_CONSENT_LAR_FIRSTNAME"
                },
                {
                  "type": "TEXT",
                  "field": "lar_last_name",
                  "activityCode": "LAR_CONSENT",
                  "questionStableId": "LAR_CONSENT_LAR_LASTNAME"
                },
                {
                  "type": "TEXT",
                  "field": "lar_signature",
                  "activityCode": "LAR_CONSENT",
                  "questionStableId": "LAR_CONSENT_SIGNATURE"
                },
                {
                  "type": "ACTIVITY_DATE",
                  "field": "lar_date",
                  "activityCode": "LAR_CONSENT"
                },
                {
                  "type": "PICKLIST",
                  "field": "lar_relationship",
                  "activityCode": "LAR_CONSENT",
                  "questionStableId": "LAR_CONSENT_RELATIONSHIP"
                },
              ]
            }
          ]
        }
      ]
    },
    {
      "name": "rarex-consent-lar-assent",
      "filename": "consent-lar-assent",
      "displayName": "RARE-X consent assent LAR pdf",
      "versions": [
        {
          "tag": "v1",
          "start": null,
          "end": null,
          "sources": [
            {
              "type": "ACTIVITY",
              "activityCode": "LAR_CONSENT_ASSENT",
              "versionTag": "v1"
            }
          ],
          "files": [
            {
              "filepath": "pdfs/lar-icf.pdf",
              "type": "CUSTOM",
              "substitutions": [
                {
                  "type": "BOOLEAN",
                  "field": "follow_up_yes",
                  "activityCode": "LAR_CONSENT_ASSENT",
                  "questionStableId": "LAR_CONSENT_ASSENT_AGREE_FOLLOW_UP",
                  "checkIfFalse": false
                },
                {
                  "type": "BOOLEAN",
                  "field": "follow_up_no",
                  "activityCode": "LAR_CONSENT_ASSENT",
                  "questionStableId": "LAR_CONSENT_ASSENT_AGREE_FOLLOW_UP",
                  "checkIfFalse": true
                },
                {
                  "type": "BOOLEAN",
                  "field": "contact_result_yes",
                  "activityCode": "LAR_CONSENT_ASSENT",
                  "questionStableId": "LAR_CONSENT_ASSENT_AGREE_CONTACT_RESULT",
                  "checkIfFalse": false
                },
                {
                  "type": "BOOLEAN",
                  "field": "contact_result_no",
                  "activityCode": "LAR_CONSENT_ASSENT",
                  "questionStableId": "LAR_CONSENT_ASSENT_AGREE_CONTACT_RESULT",
                  "checkIfFalse": true
                },
                {
                  "type": "TEXT",
                  "field": "participant_first_name",
                  "activityCode": "LAR_CONSENT_ASSENT",
                  "questionStableId": "LAR_CONSENT_ASSENT_PATIENT_FIRSTNAME"
                }
                {
                  "type": "TEXT",
                  "field": "participant_last_name",
                  "activityCode": "LAR_CONSENT_ASSENT",
                  "questionStableId": "LAR_CONSENT_ASSENT_PATIENT_LASTNAME"
                },
                {
                  "type": "TEXT",
                  "field": "lar_first_name",
                  "activityCode": "LAR_CONSENT_ASSENT",
                  "questionStableId": "LAR_CONSENT_ASSENT_PARENT_FIRSTNAME"
                },
                {
                  "type": "TEXT",
                  "field": "lar_last_name",
                  "activityCode": "LAR_CONSENT_ASSENT",
                  "questionStableId": "LAR_CONSENT_ASSENT_PARENT_LASTNAME"
                },
                {
                  "type": "TEXT",
                  "field": "lar_signature",
                  "activityCode": "LAR_CONSENT_ASSENT",
                  "questionStableId": "LAR_CONSENT_ASSENT_PARENT_SIGNATURE"
                },
                {
                  "type": "ACTIVITY_DATE",
                  "field": "lar_date",
                  "activityCode": "LAR_CONSENT_ASSENT"
                },
                {
                  "type": "PICKLIST",
                  "field": "lar_relationship",
                  "activityCode": "LAR_CONSENT_ASSENT",
                  "questionStableId": "LAR_CONSENT_ASSENT_RELATIONSHIP"
                },
              ]
            }
          ]
        }
      ]
    },
    {
      "name": "rarex-assent-parental-able",
      "filename": "assent-parental-able",
      "displayName": "RARE-X assent (able to read) pdf",
      "versions": [
        {
          "tag": "v1",
          "start": null,
          "end": null,
          "sources": [
            {
              "type": "ACTIVITY",
              "activityCode": "CONSENT_ASSENT",
              "versionTag": "v1"
            }
          ],
          "files": [
            {
              "filepath": "pdfs/assent-child-7-17-adults-unable-consent.pdf",
              "type": "CUSTOM",
              "substitutions": [
                {
                  "type": "TEXT",
                  "field": "able_child_printed_name",
                  "activityCode": "CONSENT_ASSENT",
                  "questionStableId": "CONSENT_ASSENT_ABLE_CHILD_PRINTED_NAME"
                },
                {
                  "type": "TEXT",
                  "field": "able_child_signature",
                  "activityCode": "CONSENT_ASSENT",
                  "questionStableId": "CONSENT_ASSENT_ABLE_CHILD_SIGNATURE"
                },
                {
                  "type": "ACTIVITY_DATE",
                  "field": "able_child_date",
                  "activityCode": "CONSENT_ASSENT"
                },
                {
                  "type": "TEXT",
                  "field": "able_person_printed_name",
                  "activityCode": "CONSENT_ASSENT",
                  "questionStableId": "CONSENT_ASSENT_ABLE_PERSON_PRINTED_NAME"
                },
                {
                  "type": "TEXT",
                  "field": "able_person_signature",
                  "activityCode": "CONSENT_ASSENT",
                  "questionStableId": "CONSENT_ASSENT_ABLE_PERSON_SIGNATURE"
                },
                {
                  "type": "ACTIVITY_DATE",
                  "field": "able_person_date",
                  "activityCode": "CONSENT_ASSENT"
                },
              ]
            }
          ]
        }
      ]
    },
    {
      "name": "rarex-assent-parental-unable",
      "filename": "assent-parental-unable",
      "displayName": "RARE-X assent (unable to read) pdf",
      "versions": [
        {
          "tag": "v1",
          "start": null,
          "end": null,
          "sources": [
            {
              "type": "ACTIVITY",
              "activityCode": "CONSENT_ASSENT",
              "versionTag": "v1"
            }
          ],
          "files": [
            {
              "filepath": "pdfs/assent-child-7-17-adults-unable-consent.pdf",
              "type": "CUSTOM",
              "substitutions": [
                {
                  "type": "TEXT",
                  "field": "unable_child_printed_name",
                  "activityCode": "CONSENT_ASSENT",
                  "questionStableId": "CONSENT_ASSENT_UNABLE_CHILD_PRINTED_NAME"
                },
                {
                  "type": "TEXT",
                  "field": "unable_child_signature",
                  "activityCode": "CONSENT_ASSENT",
                  "questionStableId": "CONSENT_ASSENT_UNABLE_CHILD_SIGNATURE"
                },
                {
                  "type": "ACTIVITY_DATE",
                  "field": "unable_child_date",
                  "activityCode": "CONSENT_ASSENT"
                },
                {
                  "type": "TEXT",
                  "field": "unable_person_printed_name",
                  "activityCode": "CONSENT_ASSENT",
                  "questionStableId": "CONSENT_ASSENT_UNABLE_PERSON_PRINTED_NAME"
                },
                {
                  "type": "TEXT",
                  "field": "unable_person_signature",
                  "activityCode": "CONSENT_ASSENT",
                  "questionStableId": "CONSENT_ASSENT_UNABLE_PERSON_SIGNATURE"
                },
                {
                  "type": "ACTIVITY_DATE",
                  "field": "unable_person_date",
                  "activityCode": "CONSENT_ASSENT"
                },
              ]
            }
          ]
        }
      ]
    },
    {
      "name": "rarex-assent-lar-able",
      "filename": "assent-lar-able",
      "displayName": "RARE-X assent (able to read) pdf",
      "versions": [
        {
          "tag": "v1",
          "start": null,
          "end": null,
          "sources": [
            {
              "type": "ACTIVITY",
              "activityCode": "LAR_CONSENT_ASSENT",
              "versionTag": "v1"
            }
          ],
          "files": [
            {
              "filepath": "pdfs/assent-child-7-17-adults-unable-consent.pdf",
              "type": "CUSTOM",
              "substitutions": [
                {
                  "type": "TEXT",
                  "field": "able_child_printed_name",
                  "activityCode": "LAR_CONSENT_ASSENT",
                  "questionStableId": "LAR_ASSENT_ABLE_PATIENT_PRINTED_NAME"
                },
                {
                  "type": "TEXT",
                  "field": "able_child_signature",
                  "activityCode": "LAR_CONSENT_ASSENT",
                  "questionStableId": "LAR_ASSENT_ABLE_PATIENT_SIGNATURE"
                },
                {
                  "type": "ACTIVITY_DATE",
                  "field": "able_child_date",
                  "activityCode": "LAR_CONSENT_ASSENT"
                },
                {
                  "type": "TEXT",
                  "field": "able_person_printed_name",
                  "activityCode": "LAR_CONSENT_ASSENT",
                  "questionStableId": "LAR_ASSENT_ABLE_PERSON_PRINTED_NAME"
                },
                {
                  "type": "TEXT",
                  "field": "able_person_signature",
                  "activityCode": "LAR_CONSENT_ASSENT",
                  "questionStableId": "LAR_ASSENT_ABLE_PERSON_SIGNATURE"
                },
                {
                  "type": "ACTIVITY_DATE",
                  "field": "able_person_date",
                  "activityCode": "LAR_CONSENT_ASSENT"
                },
              ]
            }
          ]
        }
      ]
    },
    {
      "name": "rarex-assent-lar-unable",
      "filename": "assent-lar-unable",
      "displayName": "RARE-X assent (unable to read) pdf",
      "versions": [
        {
          "tag": "v1",
          "start": null,
          "end": null,
          "sources": [
            {
              "type": "ACTIVITY",
              "activityCode": "LAR_CONSENT_ASSENT",
              "versionTag": "v1"
            }
          ],
          "files": [
            {
              "filepath": "pdfs/assent-child-7-17-adults-unable-consent.pdf",
              "type": "CUSTOM",
              "substitutions": [
                {
                  "type": "TEXT",
                  "field": "unable_child_printed_name",
                  "activityCode": "LAR_CONSENT_ASSENT",
                  "questionStableId": "LAR_ASSENT_UNABLE_PATIENT_PRINTED_NAME"
                },
                {
                  "type": "TEXT",
                  "field": "unable_child_signature",
                  "activityCode": "LAR_CONSENT_ASSENT",
                  "questionStableId": "LAR_ASSENT_UNABLE_PATIENT_SIGNATURE"
                },
                {
                  "type": "ACTIVITY_DATE",
                  "field": "unable_child_date",
                  "activityCode": "LAR_CONSENT_ASSENT"
                },
                {
                  "type": "TEXT",
                  "field": "unable_person_printed_name",
                  "activityCode": "LAR_CONSENT_ASSENT",
                  "questionStableId": "LAR_ASSENT_UNABLE_PERSON_PRINTED_NAME"
                },
                {
                  "type": "TEXT",
                  "field": "unable_person_signature",
                  "activityCode": "LAR_CONSENT_ASSENT",
                  "questionStableId": "LAR_ASSENT_UNABLE_PERSON_SIGNATURE"
                },
                {
                  "type": "ACTIVITY_DATE",
                  "field": "unable_person_date",
                  "activityCode": "LAR_CONSENT_ASSENT"
                },
              ]
            }
          ]
        }
      ]
    }
  ],

  "workflowTransitions": [
    # main study workflow
    {
      "from": {
        "type": "START"
      },
      "to": [
        {
          "type": "ACTIVITY",
          "activityCode": "PREQUAL",
          "expression": "true"
        }
      ]
    },
    {
      "from": {
        "type": "ACTIVITY",
        "activityCode": "PREQUAL",
      },
      "to": [
        {
          "type": "PARTICIPANT_LIST",
          "expression": "true"
        }
      ]
    },
    {
      "from": {
        "type": "ACTIVITY",
        "activityCode": "ADD_PARTICIPANT",
      },
      "to": [
        {
          "type": "ACTIVITY",
          "activityCode": "CONSENT",
          "expression": """user.studies["rarex"].forms["CONSENT"].hasInstance()"""
        },
        {
          "type": "ACTIVITY",
          "activityCode": "PARENTAL_CONSENT",
          "expression": """user.studies["rarex"].forms["PARENTAL_CONSENT"].hasInstance()"""
        },
        {
          "type": "ACTIVITY",
          "activityCode": "CONSENT_ASSENT",
          "expression": """user.studies["rarex"].forms["CONSENT_ASSENT"].hasInstance()"""
        },
        {
          "type": "ACTIVITY",
          "activityCode": "LAR_CONSENT",
          "expression": """user.studies["rarex"].forms["LAR_CONSENT"].hasInstance()"""
        },
        {
          "type": "ACTIVITY",
          "activityCode": "LAR_CONSENT_ASSENT",
          "expression": """user.studies["rarex"].forms["LAR_CONSENT_ASSENT"].hasInstance()"""
        },
        {
          "type": "ACTIVITY",
          "activityCode": "FAMILY_MEMBER",
          "expression": """user.studies["rarex"].forms["FAMILY_MEMBER"].hasInstance()"""
        }
      ]
    },
    {
      "from": {
        "type": "RETURN_USER"
      },
      "to": [
        {
          "type": "PARTICIPANT_LIST",
          "expression": "true"
        }
      ]
    },
    {
      "from": {
        "type": "PARTICIPANT_LIST"
      },
      "to": [
        {
          "type": "ACTIVITY",
          "activityCode": "ADD_PARTICIPANT",
          "expression": "true"
        }
      ]
    },
    {
      "from": {
        "type": "ACTIVITY"
        "activityCode": "CONSENT"
      },
      "to": [
        {
          "type": "ACTIVITY",
          "activityCode": "DATA_SHARING",
          "expression": """user.studies["rarex"].forms["DATA_SHARING"].hasInstance()"""
        }
      ]
    },
    {
      "from": {
        "type": "ACTIVITY",
        "activityCode": "PARENTAL_CONSENT"
      },
      "to": [
        {
          "type": "ACTIVITY",
          "activityCode": "DATA_SHARING",
          "expression": """user.studies["rarex"].forms["DATA_SHARING"].hasInstance()"""
        }
      ]
    },
    {
      "from": {
        "type": "ACTIVITY",
        "activityCode": "CONSENT_ASSENT"
      },
      "to": [
        {
          "type": "ACTIVITY",
          "activityCode": "DATA_SHARING",
          "expression": """user.studies["rarex"].forms["DATA_SHARING"].hasInstance()"""
        }
      ]
    },
    {
      "from": {
        "type": "ACTIVITY",
        "activityCode": "LAR_CONSENT"
      },
      "to": [
        {
          "type": "ACTIVITY",
          "activityCode": "DATA_SHARING",
          "expression": """user.studies["rarex"].forms["DATA_SHARING"].hasInstance()"""
        }
      ]
    },
    {
      "from": {
        "type": "ACTIVITY",
        "activityCode": "LAR_CONSENT_ASSENT"
      },
      "to": [
        {
          "type": "ACTIVITY",
          "activityCode": "DATA_SHARING",
          "expression": """user.studies["rarex"].forms["DATA_SHARING"].hasInstance()"""
        }
      ]
    },
    {
      "from": {
        "type": "ACTIVITY"
        "activityCode": "DATA_SHARING"
      },
      "to": [
        {
          "type": "ACTIVITY",
          "activityCode": "GENERAL_INFORMATION",
          "expression": "true"
        }
      ]
    },
    {
      "from": {
        "type": "ACTIVITY"
        "activityCode": "GENERAL_INFORMATION"
      },
      "to": [
        {
          "type": "PARTICIPANT_LIST",
          "expression": "true"
        }
      ]
    },
    {
      "from": {
        "type": "ACTIVITY"
        "activityCode": "LEGACY"
      },
      "to": [
        {
          "type": "DASHBOARD",
          "expression": "true"
        }
      ]
    },
    {
      "from": {
        "type": "ACTIVITY"
        "activityCode": "HEALTH_AND_DEVELOPMENT"
      },
      "to": [
        {
          "type": "PARTICIPANT_LIST",
          "expression": "true"
        }
      ]
    }
    {
      "from": {
        "type": "ACTIVITY",
        "activityCode": "QUALITY_OF_LIFE"
      },
      "to": [
        {
          "type": "PARTICIPANT_LIST",
          "expression": "true"
        }
      ]
    },
    {
      "from": {
        "type": "ACTIVITY",
        "activityCode": "CHILD_QUALITY_OF_LIFE"
      },
      "to": [
        {
          "type": "PARTICIPANT_LIST",
          "expression": "true"
        }
      ]
    },
    {
      "from": {
        "type": "ACTIVITY",
        "activityCode": "PATIENT_QUALITY_OF_LIFE"
      },
      "to": [
        {
          "type": "PARTICIPANT_LIST",
          "expression": "true"
        }
      ]
    },

    # Family Member Survey workflow
    {
      "from": {
        "type": "ACTIVITY",
        "activityCode": "FAMILY_MEMBER"
      },
      "to": [
        {
          "type": "ACTIVITY",
          "activityCode": "FAMILY_MEMBER",
          "expression": """user.studies["rarex"].forms["FAMILY_MEMBER"].isStatus("CREATED", "IN_PROGRESS")"""
        },
        {
          "type": "THANK_YOU",
          "expression": """user.studies["rarex"].forms["FAMILY_MEMBER"].isStatus("COMPLETE")"""
        }
      ]
    }
  ],

  "events": [
    # activity instance creation events
    #
    # summary of different consent scenarios:
    # ```
    # if self:
    #    give self-consent
    # if child_age < 7:
    #    give consent-parental
    # if (7 <= child_age < majority) and child_not_capable:
    #    give consent-parental
    # if (7 <= child_age < majority) and child_is_capable:
    #    give consent-assent
    # if child_age >= majority and child_not_capable:
    #    give lar-consent
    # if child_age >= majority and child_is_capable:
    #    give lar-consent-assent
    # ```
    {
      "trigger": {
        "type": "ACTIVITY_STATUS",
        "activityCode": "ADD_PARTICIPANT",
        "statusType": "COMPLETE"
      },
      "action": {
        "type": "ACTIVITY_INSTANCE_CREATION",
        "activityCode": "CONSENT"
      },
      "preconditionExpr": """user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_RELATIONSHIP"].answers.hasOption("SELF")
        && (
          ( user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_COUNTRY"].answers.hasOption("US")
            && (
              ( user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_STATE"].answers.hasOption("AL")
                && user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_AGE"].answers.value() >= 19
              ) || (
                !user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_STATE"].answers.hasOption("AL")
                && user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_AGE"].answers.value() >= 18
              )
            )
          ) || (
            user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_COUNTRY"].answers.hasOption("CA")
            && (
              ( user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_PROVINCE"].answers.hasAnyOption("BC", "NB", "NL", "NT", "NS", "NU", "YT")
                && user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_AGE"].answers.value() >= 19
              ) || (
                user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_PROVINCE"].answers.hasAnyOption("AB", "MB", "ON", "PE", "QC", "SK")
                && user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_AGE"].answers.value() >= 18
              )
            )
          ) || (
            user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_COUNTRY"].answers.hasOption("PR")
            && user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_AGE"].answers.value() >= 21
          ) || (
            !user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_COUNTRY"].answers.hasAnyOption("US", "CA", "PR")
            && user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_AGE"].answers.value() >= 18
          )
        )
      """,
      "maxOccurrencesPerUser": 1,
      "dispatchToHousekeeping": false,
      "order": 1
    },
    {
      "trigger": {
        "type": "ACTIVITY_STATUS",
        "activityCode": "ADD_PARTICIPANT",
        "statusType": "COMPLETE"
      },
      "action": {
        "type": "ACTIVITY_INSTANCE_CREATION",
        "activityCode": "LAR_CONSENT"
      },
      "preconditionExpr": """!user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_RELATIONSHIP"].answers.hasOption("SELF")
        && user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["CHILD_COGNITIVELY_CAPABLE"].answers.hasOption("NO")
        && (
          ( user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_COUNTRY"].answers.hasOption("US")
            && (
              ( user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_STATE"].answers.hasOption("AL")
                && user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_AGE"].answers.value() >= 19
              ) || (
                !user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_STATE"].answers.hasOption("AL")
                && user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_AGE"].answers.value() >= 18
              )
            )
          ) || (
            user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_COUNTRY"].answers.hasOption("CA")
            && (
              ( user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_PROVINCE"].answers.hasAnyOption("BC", "NB", "NL", "NT", "NS", "NU", "YT")
                && user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_AGE"].answers.value() >= 19
              ) || (
                user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_PROVINCE"].answers.hasAnyOption("AB", "MB", "ON", "PE", "QC", "SK")
                && user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_AGE"].answers.value() >= 18
              )
            )
          ) || (
            user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_COUNTRY"].answers.hasOption("PR")
            && user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_AGE"].answers.value() >= 21
          ) || (
            !user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_COUNTRY"].answers.hasAnyOption("US", "CA", "PR")
            && user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_AGE"].answers.value() >= 18
          )
        )
      """,
      "maxOccurrencesPerUser": 1,
      "dispatchToHousekeeping": false,
      "order": 1
    },
    {
      "trigger": {
        "type": "ACTIVITY_STATUS",
        "activityCode": "ADD_PARTICIPANT",
        "statusType": "COMPLETE"
      },
      "action": {
        "type": "ACTIVITY_INSTANCE_CREATION",
        "activityCode": "LAR_CONSENT_ASSENT"
      },
      "preconditionExpr": """!user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_RELATIONSHIP"].answers.hasOption("SELF")
        && user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["CHILD_COGNITIVELY_CAPABLE"].answers.hasOption("YES")
        && (
          ( user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_COUNTRY"].answers.hasOption("US")
            && (
              ( user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_STATE"].answers.hasOption("AL")
                && user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_AGE"].answers.value() >= 19
              ) || (
                !user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_STATE"].answers.hasOption("AL")
                && user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_AGE"].answers.value() >= 18
              )
            )
          ) || (
            user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_COUNTRY"].answers.hasOption("CA")
            && (
              ( user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_PROVINCE"].answers.hasAnyOption("BC", "NB", "NL", "NT", "NS", "NU", "YT")
                && user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_AGE"].answers.value() >= 19
              ) || (
                user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_PROVINCE"].answers.hasAnyOption("AB", "MB", "ON", "PE", "QC", "SK")
                && user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_AGE"].answers.value() >= 18
              )
            )
          ) || (
            user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_COUNTRY"].answers.hasOption("PR")
            && user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_AGE"].answers.value() >= 21
          ) || (
            !user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_COUNTRY"].answers.hasAnyOption("US", "CA", "PR")
            && user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_AGE"].answers.value() >= 18
          )
        )
      """,
      "maxOccurrencesPerUser": 1,
      "dispatchToHousekeeping": false,
      "order": 1
    },
    {
      "trigger": {
        "type": "ACTIVITY_STATUS",
        "activityCode": "ADD_PARTICIPANT",
        "statusType": "COMPLETE"
      },
      "action": {
        "type": "ACTIVITY_INSTANCE_CREATION",
        "activityCode": "PARENTAL_CONSENT"
      },
      "preconditionExpr": """!user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_RELATIONSHIP"].answers.hasOption("SELF")
        && (
          user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_AGE"].answers.value() < 7
          || (
            user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["CHILD_COGNITIVELY_CAPABLE"].answers.hasOption("NO")
            && (
              ( user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_COUNTRY"].answers.hasOption("US")
                && (
                  ( user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_STATE"].answers.hasOption("AL")
                    && user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_AGE"].answers.value() < 19
                  ) || (
                    !user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_STATE"].answers.hasOption("AL")
                    && user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_AGE"].answers.value() < 18
                  )
                )
              ) || (
                user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_COUNTRY"].answers.hasOption("CA")
                && (
                  ( user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_PROVINCE"].answers.hasAnyOption("BC", "NB", "NL", "NT", "NS", "NU", "YT")
                    && user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_AGE"].answers.value() < 19
                  ) || (
                    user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_PROVINCE"].answers.hasAnyOption("AB", "MB", "ON", "PE", "QC", "SK")
                    && user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_AGE"].answers.value() < 18
                  )
                )
              ) || (
                user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_COUNTRY"].answers.hasOption("PR")
                && user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_AGE"].answers.value() < 21
              ) || (
                !user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_COUNTRY"].answers.hasAnyOption("US", "CA", "PR")
                && user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_AGE"].answers.value() < 18
              )
            )
          )
        )
      """,
      "maxOccurrencesPerUser": 1,
      "dispatchToHousekeeping": false,
      "order": 2
    },
    {
      "trigger": {
        "type": "ACTIVITY_STATUS",
        "activityCode": "ADD_PARTICIPANT",
        "statusType": "COMPLETE"
      },
      "action": {
        "type": "ACTIVITY_INSTANCE_CREATION",
        "activityCode": "CONSENT_ASSENT"
      },
      "preconditionExpr": """!user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_RELATIONSHIP"].answers.hasOption("SELF")
        && user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_AGE"].answers.value() >= 7
        && user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["CHILD_COGNITIVELY_CAPABLE"].answers.hasOption("YES")
        && (
          ( user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_COUNTRY"].answers.hasOption("US")
            && (
              ( user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_STATE"].answers.hasOption("AL")
                && user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_AGE"].answers.value() < 19
              ) || (
                !user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_STATE"].answers.hasOption("AL")
                && user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_AGE"].answers.value() < 18
              )
            )
          ) || (
            user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_COUNTRY"].answers.hasOption("CA")
            && (
              ( user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_PROVINCE"].answers.hasAnyOption("BC", "NB", "NL", "NT", "NS", "NU", "YT")
                && user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_AGE"].answers.value() < 19
              ) || (
                user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_PROVINCE"].answers.hasAnyOption("AB", "MB", "ON", "PE", "QC", "SK")
                && user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_AGE"].answers.value() < 18
              )
            )
          ) || (
            user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_COUNTRY"].answers.hasOption("PR")
            && user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_AGE"].answers.value() < 21
          ) || (
            !user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_COUNTRY"].answers.hasAnyOption("US", "CA", "PR")
            && user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_AGE"].answers.value() < 18
          )
        )
      """,
      "maxOccurrencesPerUser": 1,
      "dispatchToHousekeeping": false,
      "order": 3
    },
    {
      "trigger": {
        "type": "ACTIVITY_STATUS",
        "activityCode": "PREQUAL",
        "statusType": "COMPLETE"
      },
      "action": {
        "type": "ACTIVITY_INSTANCE_CREATION",
        "activityCode": "FAMILY_MEMBER"
      },
      "preconditionExpr": """user.studies["rarex"].forms["PREQUAL"].questions["PREQUAL_SELF_DESCRIBE"].answers.hasOption("PASSED_AWAY")""",
      "maxOccurrencesPerUser": 1,
      "dispatchToHousekeeping": false,
      "order": 1
    },
    {
      "trigger": {
        "type": "ACTIVITY_STATUS",
        "activityCode": "CONSENT",
        "statusType": "COMPLETE"
      },
      "action": {
        "type": "ACTIVITY_INSTANCE_CREATION",
        "activityCode": "DATA_SHARING"
      },
      "preconditionExpr": null,
      "maxOccurrencesPerUser": 1,
      "dispatchToHousekeeping": false,
      "order": 1
    },
    {
      "trigger": {
        "type": "ACTIVITY_STATUS",
        "activityCode": "PARENTAL_CONSENT",
        "statusType": "COMPLETE"
      },
      "action": {
        "type": "ACTIVITY_INSTANCE_CREATION",
        "activityCode": "DATA_SHARING"
      },
      "preconditionExpr": null,
      "maxOccurrencesPerUser": 1,
      "dispatchToHousekeeping": false,
      "order": 1
    },
    {
      "trigger": {
        "type": "ACTIVITY_STATUS",
        "activityCode": "CONSENT_ASSENT",
        "statusType": "COMPLETE"
      },
      "action": {
        "type": "ACTIVITY_INSTANCE_CREATION",
        "activityCode": "DATA_SHARING"
      },
      "preconditionExpr": null,
      "maxOccurrencesPerUser": 1,
      "dispatchToHousekeeping": false,
      "order": 1
    },
    {
      "trigger": {
        "type": "ACTIVITY_STATUS",
        "activityCode": "LAR_CONSENT",
        "statusType": "COMPLETE"
      },
      "action": {
        "type": "ACTIVITY_INSTANCE_CREATION",
        "activityCode": "DATA_SHARING"
      },
      "preconditionExpr": null,
      "maxOccurrencesPerUser": 1,
      "dispatchToHousekeeping": false,
      "order": 1
    },
    {
      "trigger": {
        "type": "ACTIVITY_STATUS",
        "activityCode": "LAR_CONSENT_ASSENT",
        "statusType": "COMPLETE"
      },
      "action": {
        "type": "ACTIVITY_INSTANCE_CREATION",
        "activityCode": "DATA_SHARING"
      },
      "preconditionExpr": null,
      "maxOccurrencesPerUser": 1,
      "dispatchToHousekeeping": false,
      "order": 1
    },
    {
      "trigger": {
        "type": "ACTIVITY_STATUS",
        "activityCode": "DATA_SHARING",
        "statusType": "COMPLETE"
      },
      "action": {
        "type": "ACTIVITY_INSTANCE_CREATION",
        "activityCode": "GENERAL_INFORMATION"
      },
      "preconditionExpr": null,
      "maxOccurrencesPerUser": 1,
      "dispatchToHousekeeping": false,
      "order": 1
    },
    {
      "trigger": {
        "type": "ACTIVITY_STATUS",
        "activityCode": "GENERAL_INFORMATION",
        "statusType": "COMPLETE"
      },
      "action": {
        "type": "ACTIVITY_INSTANCE_CREATION",
        "activityCode": "HEALTH_AND_DEVELOPMENT"
      },
      "preconditionExpr": null,
      "maxOccurrencesPerUser": 1,
      "dispatchToHousekeeping": false,
      "order": 1
    },
    {
      "trigger": {
        "type": "ACTIVITY_STATUS",
        "activityCode": "GENERAL_INFORMATION",
        "statusType": "COMPLETE"
      },
      "action": {
        "type": "ACTIVITY_INSTANCE_CREATION",
        "activityCode": "QUALITY_OF_LIFE"
      },
      "preconditionExpr": """user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_RELATIONSHIP"].answers.hasOption("SELF")""",
      "maxOccurrencesPerUser": 1,
      "dispatchToHousekeeping": false,
      "order": 1
    },
    {
      "trigger": {
        "type": "ACTIVITY_STATUS",
        "activityCode": "GENERAL_INFORMATION",
        "statusType": "COMPLETE"
      },
      "action": {
        "type": "ACTIVITY_INSTANCE_CREATION",
        "activityCode": "CHILD_QUALITY_OF_LIFE"
      },
      "preconditionExpr": """!user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_RELATIONSHIP"].answers.hasOption("SELF")
        && (
          ( user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_COUNTRY"].answers.hasOption("US")
            && (
              ( user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_STATE"].answers.hasOption("AL")
                && user.profile.age() < 19
              ) || (
                !user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_STATE"].answers.hasOption("AL")
                && user.profile.age() < 18
              )
            )
          ) || (
            user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_COUNTRY"].answers.hasOption("CA")
            && (
              ( user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_PROVINCE"].answers.hasAnyOption("BC", "NB", "NL", "NT", "NS", "NU", "YT")
                && user.profile.age() < 19
              ) || (
                user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_PROVINCE"].answers.hasAnyOption("AB", "MB", "ON", "PE", "QC", "SK")
                && user.profile.age() < 18
              )
            )
          ) || (
            user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_COUNTRY"].answers.hasOption("PR")
            && user.profile.age() < 21
          ) || (
            !user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_COUNTRY"].answers.hasAnyOption("US", "CA", "PR")
            && user.profile.age() < 18
          )
        )
      """,
      "maxOccurrencesPerUser": 1,
      "dispatchToHousekeeping": false,
      "order": 1
    },
    {
      "trigger": {
        "type": "ACTIVITY_STATUS",
        "activityCode": "GENERAL_INFORMATION",
        "statusType": "COMPLETE"
      },
      "action": {
        "type": "ACTIVITY_INSTANCE_CREATION",
        "activityCode": "PATIENT_QUALITY_OF_LIFE"
      },
      "preconditionExpr": """!user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_RELATIONSHIP"].answers.hasOption("SELF")
        && (
          ( user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_COUNTRY"].answers.hasOption("US")
            && (
              ( user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_STATE"].answers.hasOption("AL")
                && user.profile.age() >= 19
              ) || (
                !user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_STATE"].answers.hasOption("AL")
                && user.profile.age() >= 18
              )
            )
          ) || (
            user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_COUNTRY"].answers.hasOption("CA")
            && (
              ( user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_PROVINCE"].answers.hasAnyOption("BC", "NB", "NL", "NT", "NS", "NU", "YT")
                && user.profile.age() >= 19
              ) || (
                user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_PROVINCE"].answers.hasAnyOption("AB", "MB", "ON", "PE", "QC", "SK")
                && user.profile.age() >= 18
              )
            )
          ) || (
            user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_COUNTRY"].answers.hasOption("PR")
            && user.profile.age() >= 21
          ) || (
            !user.studies["rarex"].forms["ADD_PARTICIPANT"].questions["PARTICIPANT_COUNTRY"].answers.hasAnyOption("US", "CA", "PR")
            && user.profile.age() >= 18
          )
        )
      """,
      "maxOccurrencesPerUser": 1,
      "dispatchToHousekeeping": false,
      "order": 1
    },
    {
      "trigger": {
        "type": "ACTIVITY_STATUS",
        "activityCode": "GENERAL_INFORMATION",
        "statusType": "COMPLETE"
      },
      "action": {
        "type": "ACTIVITY_INSTANCE_CREATION",
        "activityCode": "LEGACY"
      },
      "preconditionExpr": """user.studies["rarex"].forms["GENERAL_INFORMATION"].questions["PATIENT_ALIVE"].answers.hasOption("NO")""",
      "maxOccurrencesPerUser": 1,
      "dispatchToHousekeeping": false,
      "order": 1
    },
    # user enrollment
    {
      "trigger": {
        "type": "ACTIVITY_STATUS",
        "activityCode": "CONSENT",
        "statusType": "COMPLETE"
      },
      "action": {
        "type": "USER_ENROLLED"
      },
      "maxOccurrencesPerUser": 1,
      "dispatchToHousekeeping": false,
      "order": 1
    },
    {
      "trigger": {
        "type": "ACTIVITY_STATUS",
        "activityCode": "CONSENT_ASSENT",
        "statusType": "COMPLETE"
      },
      "action": {
        "type": "USER_ENROLLED"
      },
      "maxOccurrencesPerUser": 1,
      "dispatchToHousekeeping": false,
      "order": 1
    },
    {
      "trigger": {
        "type": "ACTIVITY_STATUS",
        "activityCode": "PARENTAL_CONSENT",
        "statusType": "COMPLETE"
      },
      "action": {
        "type": "USER_ENROLLED"
      },
      "maxOccurrencesPerUser": 1,
      "dispatchToHousekeeping": false,
      "order": 1
    },
    {
      "trigger": {
        "type": "ACTIVITY_STATUS",
        "activityCode": "LAR_CONSENT",
        "statusType": "COMPLETE"
      },
      "action": {
        "type": "USER_ENROLLED"
      },
      "maxOccurrencesPerUser": 1,
      "dispatchToHousekeeping": false,
      "order": 1
    },
    {
      "trigger": {
        "type": "ACTIVITY_STATUS",
        "activityCode": "LAR_CONSENT_ASSENT",
        "statusType": "COMPLETE"
      },
      "action": {
        "type": "USER_ENROLLED"
      },
      "maxOccurrencesPerUser": 1,
      "dispatchToHousekeeping": false,
      "order": 1
    },

    # email events

    ## welcome email
    {
      "trigger": {
        "type": "USER_REGISTERED"
      },
      "action": {
        "type": "SENDGRID_EMAIL",
        "templates": [
          {
            "emailTemplate": ${emails.signUpWelcome},
            "language": "en",
            "isDynamic": false
          }
        ],
        "pdfAttachments": []
      },
      "cancelExpr": """!user.studies["rarex"].forms["PREQUAL"].questions["PREQUAL_SELF_DESCRIBE"].answers.hasOption("DIAGNOSED")""",
      "dispatchToHousekeeping": true,
      "order": 1
    },
    {
      "trigger": {
        "type": "USER_REGISTERED"
      },
      "action": {
        "type": "SENDGRID_EMAIL",
        "templates": [
          {
            "emailTemplate": ${emails.signUpWelcomeParental},
            "language": "en",
            "isDynamic": false
          }
        ],
        "pdfAttachments": []
      },
      "cancelExpr": """!user.studies["rarex"].forms["PREQUAL"].questions["PREQUAL_SELF_DESCRIBE"].answers.hasOption("CHILD_DIAGNOSED")""",
      "dispatchToHousekeeping": true,
      "order": 1
    },

    ## finish consent reminder
    {
      "trigger": {
        "type": "ACTIVITY_STATUS",
        "activityCode": "CONSENT",
        "statusType": "CREATED"
      },
      "action": {
        "type": "SENDGRID_EMAIL",
        "templates": [
          {
            "emailTemplate": ${emails.consent1wkReminder},
            "language": "en",
            "isDynamic": false
          }
        ],
        "linkedActivityCode": "CONSENT",
        "pdfAttachments": []
      },
      "cancelExpr": """user.studies["rarex"].forms["CONSENT"].isStatus("COMPLETE")""",
      "delaySeconds": ${delay.two_days},
      "dispatchToHousekeeping": true,
      "order": 1
    },
    {
      "trigger": {
        "type": "ACTIVITY_STATUS",
        "activityCode": "CONSENT",
        "statusType": "CREATED"
      },
      "action": {
        "type": "SENDGRID_EMAIL",
        "templates": [
          {
            "emailTemplate": ${emails.consent1wkReminder},
            "language": "en",
            "isDynamic": false
          }
        ],
        "linkedActivityCode": "CONSENT",
        "pdfAttachments": []
      },
      "cancelExpr": """user.studies["rarex"].forms["CONSENT"].isStatus("COMPLETE")""",
      "delaySeconds": ${delay.seven_days},
      "dispatchToHousekeeping": true,
      "order": 1
    },

    ## finish parental consent reminder
    {
      "trigger": {
        "type": "ACTIVITY_STATUS",
        "activityCode": "PARENTAL_CONSENT",
        "statusType": "CREATED"
      },
      "action": {
        "type": "SENDGRID_EMAIL",
        "templates": [
          {
            "emailTemplate": ${emails.consentParental1wkReminder},
            "language": "en",
            "isDynamic": false
          }
        ],
        "linkedActivityCode": "PARENTAL_CONSENT",
        "pdfAttachments": []
      },
      "cancelExpr": """user.studies["rarex"].forms["PARENTAL_CONSENT"].isStatus("COMPLETE")""",
      "delaySeconds": ${delay.two_days},
      "dispatchToHousekeeping": true,
      "order": 1
    },
    {
      "trigger": {
        "type": "ACTIVITY_STATUS",
        "activityCode": "PARENTAL_CONSENT",
        "statusType": "CREATED"
      },
      "action": {
        "type": "SENDGRID_EMAIL",
        "templates": [
          {
            "emailTemplate": ${emails.consentParental1wkReminder},
            "language": "en",
            "isDynamic": false
          }
        ],
        "linkedActivityCode": "PARENTAL_CONSENT",
        "pdfAttachments": []
      },
      "cancelExpr": """user.studies["rarex"].forms["PARENTAL_CONSENT"].isStatus("COMPLETE")""",
      "delaySeconds": ${delay.seven_days},
      "dispatchToHousekeeping": true,
      "order": 1
    },

    ## finish consent assent reminder
    {
      "trigger": {
        "type": "ACTIVITY_STATUS",
        "activityCode": "CONSENT_ASSENT",
        "statusType": "CREATED"
      },
      "action": {
        "type": "SENDGRID_EMAIL",
        "templates": [
          {
            "emailTemplate": ${emails.consentAssent1wkReminder},
            "language": "en",
            "isDynamic": false
          }
        ],
        "linkedActivityCode": "CONSENT_ASSENT",
        "pdfAttachments": []
      },
      "cancelExpr": """user.studies["rarex"].forms["CONSENT_ASSENT"].isStatus("COMPLETE")""",
      "delaySeconds": ${delay.two_days},
      "dispatchToHousekeeping": true,
      "order": 1
    },
    {
      "trigger": {
        "type": "ACTIVITY_STATUS",
        "activityCode": "CONSENT_ASSENT",
        "statusType": "CREATED"
      },
      "action": {
        "type": "SENDGRID_EMAIL",
        "templates": [
          {
            "emailTemplate": ${emails.consentAssent1wkReminder},
            "language": "en",
            "isDynamic": false
          }
        ],
        "linkedActivityCode": "CONSENT_ASSENT",
        "pdfAttachments": []
      },
      "cancelExpr": """user.studies["rarex"].forms["CONSENT_ASSENT"].isStatus("COMPLETE")""",
      "delaySeconds": ${delay.seven_days},
      "dispatchToHousekeeping": true,
      "order": 1
    },

    ## finish lar consent reminder
    {
      "trigger": {
        "type": "ACTIVITY_STATUS",
        "activityCode": "LAR_CONSENT",
        "statusType": "CREATED"
      },
      "action": {
        "type": "SENDGRID_EMAIL",
        "templates": [
          {
            "emailTemplate": ${emails.consentParental1wkReminder},
            "language": "en",
            "isDynamic": false
          }
        ],
        "linkedActivityCode": "LAR_CONSENT",
        "pdfAttachments": []
      },
      "cancelExpr": """user.studies["rarex"].forms["LAR_CONSENT"].isStatus("COMPLETE")""",
      "delaySeconds": ${delay.two_days},
      "dispatchToHousekeeping": true,
      "order": 1
    },
    {
      "trigger": {
        "type": "ACTIVITY_STATUS",
        "activityCode": "LAR_CONSENT",
        "statusType": "CREATED"
      },
      "action": {
        "type": "SENDGRID_EMAIL",
        "templates": [
          {
            "emailTemplate": ${emails.consentParental1wkReminder},
            "language": "en",
            "isDynamic": false
          }
        ],
        "linkedActivityCode": "LAR_CONSENT",
        "pdfAttachments": []
      },
      "cancelExpr": """user.studies["rarex"].forms["LAR_CONSENT"].isStatus("COMPLETE")""",
      "delaySeconds": ${delay.seven_days},
      "dispatchToHousekeeping": true,
      "order": 1
    },

    ## finish lar consent assent reminder
    {
      "trigger": {
        "type": "ACTIVITY_STATUS",
        "activityCode": "LAR_CONSENT_ASSENT",
        "statusType": "CREATED"
      },
      "action": {
        "type": "SENDGRID_EMAIL",
        "templates": [
          {
            "emailTemplate": ${emails.consentAssent1wkReminder},
            "language": "en",
            "isDynamic": false
          }
        ],
        "linkedActivityCode": "LAR_CONSENT_ASSENT",
        "pdfAttachments": []
      },
      "cancelExpr": """user.studies["rarex"].forms["LAR_CONSENT_ASSENT"].isStatus("COMPLETE")""",
      "delaySeconds": ${delay.two_days},
      "dispatchToHousekeeping": true,
      "order": 1
    },
    {
      "trigger": {
        "type": "ACTIVITY_STATUS",
        "activityCode": "LAR_CONSENT_ASSENT",
        "statusType": "CREATED"
      },
      "action": {
        "type": "SENDGRID_EMAIL",
        "templates": [
          {
            "emailTemplate": ${emails.consentAssent1wkReminder},
            "language": "en",
            "isDynamic": false
          }
        ],
        "linkedActivityCode": "LAR_CONSENT_ASSENT",
        "pdfAttachments": []
      },
      "cancelExpr": """user.studies["rarex"].forms["LAR_CONSENT_ASSENT"].isStatus("COMPLETE")""",
      "delaySeconds": ${delay.seven_days},
      "dispatchToHousekeeping": true,
      "order": 1
    },

    ## Consent finished notification
    {
      "trigger": {
        "type": "ACTIVITY_STATUS",
        "activityCode": "CONSENT",
        "statusType": "COMPLETE"
      },
      "action": {
        "type": "SENDGRID_EMAIL",
        "templates": [
          {
            "emailTemplate": ${emails.consentCompleted},
            "language": "en",
            "isDynamic": false
          }
        ],
        "pdfAttachments": [
          { "pdfName": "rarex-consent-self", "generateIfMissing": true }
        ]
      },
      "dispatchToHousekeeping": true,
      "order": 1
    },

    ## Parental Consent finished notification
    {
      "trigger": {
        "type": "ACTIVITY_STATUS",
        "activityCode": "PARENTAL_CONSENT",
        "statusType": "COMPLETE"
      },
      "action": {
        "type": "SENDGRID_EMAIL",
        "templates": [
          {
            "emailTemplate": ${emails.consentParentalCompleted},
            "language": "en",
            "isDynamic": false
          }
        ],
        "pdfAttachments": [
          { "pdfName": "rarex-consent-parental", "generateIfMissing": true }
        ]
      },
      "dispatchToHousekeeping": true,
      "order": 1
    },

    ## Consent Assent finished notification
    {
      "trigger": {
        "type": "ACTIVITY_STATUS",
        "activityCode": "CONSENT_ASSENT",
        "statusType": "COMPLETE"
      },
      "action": {
        "type": "SENDGRID_EMAIL",
        "templates": [
          {
            "emailTemplate": ${emails.consentAssentCompleted},
            "language": "en",
            "isDynamic": false
          }
        ],
        "pdfAttachments": [
          { "pdfName": "rarex-consent-parental-assent", "generateIfMissing": true },
          { "pdfName": "rarex-assent-parental-able", "generateIfMissing": true }
        ]
      },
      "cancelExpr": """user.studies["rarex"].forms["CONSENT_ASSENT"].questions["ASSENT_ABLE_READ"].answers.hasOption("NO")""",
      "dispatchToHousekeeping": true,
      "order": 1
    },

    {
      "trigger": {
        "type": "ACTIVITY_STATUS",
        "activityCode": "CONSENT_ASSENT",
        "statusType": "COMPLETE"
      },
      "action": {
        "type": "SENDGRID_EMAIL",
        "templates": [
          {
            "emailTemplate": ${emails.consentAssentCompleted},
            "language": "en",
            "isDynamic": false
          }
        ],
        "pdfAttachments": [
          { "pdfName": "rarex-consent-parental-assent", "generateIfMissing": true },
          { "pdfName": "rarex-assent-parental-unable", "generateIfMissing": true }
        ]
      },
      "cancelExpr": """user.studies["rarex"].forms["CONSENT_ASSENT"].questions["ASSENT_ABLE_READ"].answers.hasOption("YES")""",
      "dispatchToHousekeeping": true,
      "order": 1
    },

    ## LAR consent finished notification
    {
      "trigger": {
        "type": "ACTIVITY_STATUS",
        "activityCode": "LAR_CONSENT",
        "statusType": "COMPLETE"
      },
      "action": {
        "type": "SENDGRID_EMAIL",
        "templates": [
          {
            "emailTemplate": ${emails.consentParentalCompleted},
            "language": "en",
            "isDynamic": false
          }
        ],
        "pdfAttachments": [
          { "pdfName": "rarex-consent-lar", "generateIfMissing": true }
        ]
      },
      "dispatchToHousekeeping": true,
      "order": 1
    },

    ## LAR consent assent finished notification
    {
      "trigger": {
        "type": "ACTIVITY_STATUS",
        "activityCode": "LAR_CONSENT_ASSENT",
        "statusType": "COMPLETE"
      },
      "action": {
        "type": "SENDGRID_EMAIL",
        "templates": [
          {
            "emailTemplate": ${emails.consentAssentCompleted},
            "language": "en",
            "isDynamic": false
          }
        ],
        "pdfAttachments": [
          { "pdfName": "rarex-consent-lar-assent", "generateIfMissing": true },
          { "pdfName": "rarex-assent-lar-able", "generateIfMissing": true }
        ]
      },
      "cancelExpr": """user.studies["rarex"].forms["LAR_CONSENT_ASSENT"].questions["LAR_ASSENT_ABLE_READ"].answers.hasOption("NO")""",
      "dispatchToHousekeeping": true,
      "order": 1
    },

    {
      "trigger": {
        "type": "ACTIVITY_STATUS",
        "activityCode": "LAR_CONSENT_ASSENT",
        "statusType": "COMPLETE"
      },
      "action": {
        "type": "SENDGRID_EMAIL",
        "templates": [
          {
            "emailTemplate": ${emails.consentAssentCompleted},
            "language": "en",
            "isDynamic": false
          }
        ],
        "pdfAttachments": [
          { "pdfName": "rarex-consent-lar-assent", "generateIfMissing": true },
          { "pdfName": "rarex-assent-lar-unable", "generateIfMissing": true }
        ]
      },
      "cancelExpr": """user.studies["rarex"].forms["LAR_CONSENT_ASSENT"].questions["LAR_ASSENT_ABLE_READ"].answers.hasOption("YES")""",
      "dispatchToHousekeeping": true,
      "order": 1
    },

    ## finish family member reminder
    {
      "trigger": {
        "type": "ACTIVITY_STATUS",
        "activityCode": "FAMILY_MEMBER",
        "statusType": "CREATED"
      },
      "action": {
        "type": "SENDGRID_EMAIL",
        "templates": [
          {
            "emailTemplate": ${emails.familyMember1wkReminder},
            "language": "en",
            "isDynamic": false
          }
        ],
        "linkedActivityCode": "FAMILY_MEMBER",
        "pdfAttachments": []
      },
      "cancelExpr": """user.studies["rarex"].isGovernedParticipant()
        || user.studies["rarex"].forms["FAMILY_MEMBER"].isStatus("COMPLETE")""",
      "delaySeconds": ${delay.two_days},
      "dispatchToHousekeeping": true,
      "order": 1
    },
    {
      "trigger": {
        "type": "ACTIVITY_STATUS",
        "activityCode": "FAMILY_MEMBER",
        "statusType": "CREATED"
      },
      "action": {
        "type": "SENDGRID_EMAIL",
        "templates": [
          {
            "emailTemplate": ${emails.familyMember1wkReminder},
            "language": "en",
            "isDynamic": false
          }
        ],
        "linkedActivityCode": "FAMILY_MEMBER",
        "pdfAttachments": []
      },
      "cancelExpr": """user.studies["rarex"].isGovernedParticipant()
        || user.studies["rarex"].forms["FAMILY_MEMBER"].isStatus("COMPLETE")""",
      "delaySeconds": ${delay.seven_days},
      "dispatchToHousekeeping": true,
      "order": 1
    },

    ## proxy finish family member reminder
    {
      "trigger": {
        "type": "ACTIVITY_STATUS",
        "activityCode": "FAMILY_MEMBER",
        "statusType": "CREATED"
      },
      "action": {
        "type": "SENDGRID_EMAIL",
        "templates": [
          {
            "emailTemplate": ${emails.proxyFamilyMember1wkReminder},
            "language": "en",
            "isDynamic": false
          }
        ],
        "linkedActivityCode": "FAMILY_MEMBER",
        "pdfAttachments": []
      },
      "cancelExpr": """!user.studies["rarex"].isGovernedParticipant()
        || user.studies["rarex"].forms["FAMILY_MEMBER"].isStatus("COMPLETE")""",
      "delaySeconds": ${delay.two_days},
      "dispatchToHousekeeping": true,
      "order": 1
    },
    {
      "trigger": {
        "type": "ACTIVITY_STATUS",
        "activityCode": "FAMILY_MEMBER",
        "statusType": "CREATED"
      },
      "action": {
        "type": "SENDGRID_EMAIL",
        "templates": [
          {
            "emailTemplate": ${emails.proxyFamilyMember1wkReminder},
            "language": "en",
            "isDynamic": false
          }
        ],
        "linkedActivityCode": "FAMILY_MEMBER",
        "pdfAttachments": []
      },
      "cancelExpr": """!user.studies["rarex"].isGovernedParticipant()
        || user.studies["rarex"].forms["FAMILY_MEMBER"].isStatus("COMPLETE")""",
      "delaySeconds": ${delay.seven_days},
      "dispatchToHousekeeping": true,
      "order": 1
    },

    ## General Information reminder
    {
      "trigger": {
        "type": "ACTIVITY_STATUS",
        "activityCode": "GENERAL_INFORMATION",
        "statusType": "CREATED"
      },
      "action": {
        "type": "SENDGRID_EMAIL",
        "templates": [
          {
            "emailTemplate": ${emails.finishGeneralInformationReminder},
            "language": "en",
            "isDynamic": false
          }
        ],
        "linkedActivityCode": "GENERAL_INFORMATION",
        "pdfAttachments": []
      },
      "cancelExpr": """user.studies["rarex"].isGovernedParticipant()
        || user.studies["rarex"].forms["GENERAL_INFORMATION"].isStatus("COMPLETE")""",
      "delaySeconds": ${delay.two_days},
      "dispatchToHousekeeping": true,
      "order": 1
    },
    {
      "trigger": {
        "type": "ACTIVITY_STATUS",
        "activityCode": "GENERAL_INFORMATION",
        "statusType": "CREATED"
      },
      "action": {
        "type": "SENDGRID_EMAIL",
        "templates": [
          {
            "emailTemplate": ${emails.finishGeneralInformationReminder},
            "language": "en",
            "isDynamic": false
          }
        ],
        "linkedActivityCode": "GENERAL_INFORMATION",
        "pdfAttachments": []
      },
      "cancelExpr": """user.studies["rarex"].isGovernedParticipant()
        || user.studies["rarex"].forms["GENERAL_INFORMATION"].isStatus("COMPLETE")""",
      "delaySeconds": ${delay.seven_days},
      "dispatchToHousekeeping": true,
      "order": 1
    },

    ## Proxy General Information reminder
    {
      "trigger": {
        "type": "ACTIVITY_STATUS",
        "activityCode": "GENERAL_INFORMATION",
        "statusType": "CREATED"
      },
      "action": {
        "type": "SENDGRID_EMAIL",
        "templates": [
          {
            "emailTemplate": ${emails.proxyFinishGeneralInformationReminder},
            "language": "en",
            "isDynamic": false
          }
        ],
        "linkedActivityCode": "GENERAL_INFORMATION",
        "pdfAttachments": []
      },
      "cancelExpr": """!user.studies["rarex"].isGovernedParticipant()
        || user.studies["rarex"].forms["GENERAL_INFORMATION"].isStatus("COMPLETE")""",
      "delaySeconds": ${delay.two_days},
      "dispatchToHousekeeping": true,
      "order": 1
    },
    {
      "trigger": {
        "type": "ACTIVITY_STATUS",
        "activityCode": "GENERAL_INFORMATION",
        "statusType": "CREATED"
      },
      "action": {
        "type": "SENDGRID_EMAIL",
        "templates": [
          {
            "emailTemplate": ${emails.proxyFinishGeneralInformationReminder},
            "language": "en",
            "isDynamic": false
          }
        ],
        "linkedActivityCode": "GENERAL_INFORMATION",
        "pdfAttachments": []
      },
      "cancelExpr": """!user.studies["rarex"].isGovernedParticipant()
        || user.studies["rarex"].forms["GENERAL_INFORMATION"].isStatus("COMPLETE")""",
      "delaySeconds": ${delay.seven_days},
      "dispatchToHousekeeping": true,
      "order": 1
    },

    ## Data sharing reminder
    {
      "trigger": {
        "type": "ACTIVITY_STATUS",
        "activityCode": "DATA_SHARING",
        "statusType": "CREATED"
      },
      "action": {
        "type": "SENDGRID_EMAIL",
        "templates": [
          {
            "emailTemplate": ${emails.finishDataSharingReminder},
            "language": "en",
            "isDynamic": false
          }
        ],
        "linkedActivityCode": "DATA_SHARING",
        "pdfAttachments": []
      },
      "cancelExpr": """user.studies["rarex"].isGovernedParticipant()
        || user.studies["rarex"].forms["DATA_SHARING"].isStatus("COMPLETE")""",
      "delaySeconds": ${delay.two_days},
      "dispatchToHousekeeping": true,
      "order": 1
    },
    {
      "trigger": {
        "type": "ACTIVITY_STATUS",
        "activityCode": "DATA_SHARING",
        "statusType": "CREATED"
      },
      "action": {
        "type": "SENDGRID_EMAIL",
        "templates": [
          {
            "emailTemplate": ${emails.finishDataSharingReminder},
            "language": "en",
            "isDynamic": false
          }
        ],
        "linkedActivityCode": "DATA_SHARING",
        "pdfAttachments": []
      },
      "cancelExpr": """user.studies["rarex"].isGovernedParticipant()
        || user.studies["rarex"].forms["DATA_SHARING"].isStatus("COMPLETE")""",
      "delaySeconds": ${delay.seven_days},
      "dispatchToHousekeeping": true,
      "order": 1
    },

    ## Proxy Data sharing reminder
    {
      "trigger": {
        "type": "ACTIVITY_STATUS",
        "activityCode": "DATA_SHARING",
        "statusType": "CREATED"
      },
      "action": {
        "type": "SENDGRID_EMAIL",
        "templates": [
          {
            "emailTemplate": ${emails.proxyFinishDataSharingReminder},
            "language": "en",
            "isDynamic": false
          }
        ],
        "linkedActivityCode": "DATA_SHARING",
        "pdfAttachments": []
      },
      "cancelExpr": """!user.studies["rarex"].isGovernedParticipant()
        || user.studies["rarex"].forms["DATA_SHARING"].isStatus("COMPLETE")""",
      "delaySeconds": ${delay.two_days},
      "dispatchToHousekeeping": true,
      "order": 1
    },
    {
      "trigger": {
        "type": "ACTIVITY_STATUS",
        "activityCode": "DATA_SHARING",
        "statusType": "CREATED"
      },
      "action": {
        "type": "SENDGRID_EMAIL",
        "templates": [
          {
            "emailTemplate": ${emails.proxyFinishDataSharingReminder},
            "language": "en",
            "isDynamic": false
          }
        ],
        "linkedActivityCode": "DATA_SHARING",
        "pdfAttachments": []
      },
      "cancelExpr": """!user.studies["rarex"].isGovernedParticipant()
        || user.studies["rarex"].forms["DATA_SHARING"].isStatus("COMPLETE")""",
      "delaySeconds": ${delay.seven_days},
      "dispatchToHousekeeping": true,
      "order": 1
    },

    ## Health and Development reminder
    {
      "trigger": {
        "type": "ACTIVITY_STATUS",
        "activityCode": "HEALTH_AND_DEVELOPMENT",
        "statusType": "CREATED"
      },
      "action": {
        "type": "SENDGRID_EMAIL",
        "templates": [
          {
            "emailTemplate": ${emails.finishHealthAndDevelopmentReminder},
            "language": "en",
            "isDynamic": false
          }
        ],
        "linkedActivityCode": "HEALTH_AND_DEVELOPMENT",
        "pdfAttachments": []
      },
      "cancelExpr": """user.studies["rarex"].isGovernedParticipant()
        || user.studies["rarex"].forms["HEALTH_AND_DEVELOPMENT"].isStatus("COMPLETE")""",
      "delaySeconds": ${delay.two_days},
      "dispatchToHousekeeping": true,
      "order": 1
    },
    {
      "trigger": {
        "type": "ACTIVITY_STATUS",
        "activityCode": "HEALTH_AND_DEVELOPMENT",
        "statusType": "CREATED"
      },
      "action": {
        "type": "SENDGRID_EMAIL",
        "templates": [
          {
            "emailTemplate": ${emails.finishHealthAndDevelopmentReminder},
            "language": "en",
            "isDynamic": false
          }
        ],
        "linkedActivityCode": "HEALTH_AND_DEVELOPMENT",
        "pdfAttachments": []
      },
      "cancelExpr": """user.studies["rarex"].isGovernedParticipant()
        || user.studies["rarex"].forms["HEALTH_AND_DEVELOPMENT"].isStatus("COMPLETE")""",
      "delaySeconds": ${delay.seven_days},
      "dispatchToHousekeeping": true,
      "order": 1
    },

    ## Proxy health and development reminder
    {
      "trigger": {
        "type": "ACTIVITY_STATUS",
        "activityCode": "HEALTH_AND_DEVELOPMENT",
        "statusType": "CREATED"
      },
      "action": {
        "type": "SENDGRID_EMAIL",
        "templates": [
          {
            "emailTemplate": ${emails.proxyFinishHealthAndDevelopmentReminder},
            "language": "en",
            "isDynamic": false
          }
        ],
        "linkedActivityCode": "HEALTH_AND_DEVELOPMENT",
        "pdfAttachments": []
      },
      "cancelExpr": """!user.studies["rarex"].isGovernedParticipant()
        || user.studies["rarex"].forms["HEALTH_AND_DEVELOPMENT"].isStatus("COMPLETE")""",
      "delaySeconds": ${delay.two_days},
      "dispatchToHousekeeping": true,
      "order": 1
    },
    {
      "trigger": {
        "type": "ACTIVITY_STATUS",
        "activityCode": "HEALTH_AND_DEVELOPMENT",
        "statusType": "CREATED"
      },
      "action": {
        "type": "SENDGRID_EMAIL",
        "templates": [
          {
            "emailTemplate": ${emails.proxyFinishHealthAndDevelopmentReminder},
            "language": "en",
            "isDynamic": false
          }
        ],
        "linkedActivityCode": "HEALTH_AND_DEVELOPMENT",
        "pdfAttachments": []
      },
      "cancelExpr": """!user.studies["rarex"].isGovernedParticipant()
        || user.studies["rarex"].forms["HEALTH_AND_DEVELOPMENT"].isStatus("COMPLETE")""",
      "delaySeconds": ${delay.seven_days},
      "dispatchToHousekeeping": true,
      "order": 1
    },

    ## quality of life reminder
    {
      "trigger": {
        "type": "ACTIVITY_STATUS",
        "activityCode": "QUALITY_OF_LIFE",
        "statusType": "CREATED"
      },
      "action": {
        "type": "SENDGRID_EMAIL",
        "templates": [
          {
            "emailTemplate": ${emails.finishQualityOfLifeReminder},
            "language": "en",
            "isDynamic": false
          }
        ],
        "linkedActivityCode": "QUALITY_OF_LIFE",
        "pdfAttachments": []
      },
      "cancelExpr": """user.studies["rarex"].forms["QUALITY_OF_LIFE"].isStatus("COMPLETE")""",
      "delaySeconds": ${delay.two_days},
      "dispatchToHousekeeping": true,
      "order": 1
    },
    {
      "trigger": {
        "type": "ACTIVITY_STATUS",
        "activityCode": "QUALITY_OF_LIFE",
        "statusType": "CREATED"
      },
      "action": {
        "type": "SENDGRID_EMAIL",
        "templates": [
          {
            "emailTemplate": ${emails.finishQualityOfLifeReminder},
            "language": "en",
            "isDynamic": false
          }
        ],
        "linkedActivityCode": "QUALITY_OF_LIFE",
        "pdfAttachments": []
      },
      "cancelExpr": """user.studies["rarex"].forms["QUALITY_OF_LIFE"].isStatus("COMPLETE")""",
      "delaySeconds": ${delay.seven_days},
      "dispatchToHousekeeping": true,
      "order": 1
    },

    ## child quality of life reminder
    {
      "trigger": {
        "type": "ACTIVITY_STATUS",
        "activityCode": "CHILD_QUALITY_OF_LIFE",
        "statusType": "CREATED"
      },
      "action": {
        "type": "SENDGRID_EMAIL",
        "templates": [
          {
            "emailTemplate": ${emails.proxyFinishQualityOfLifeReminder},
            "language": "en",
            "isDynamic": false
          }
        ],
        "linkedActivityCode": "CHILD_QUALITY_OF_LIFE",
        "pdfAttachments": []
      },
      "preconditionExpr": null,
      "cancelExpr": """user.studies["rarex"].forms["CHILD_QUALITY_OF_LIFE"].isStatus("COMPLETE")""",
      "delaySeconds": ${delay.two_days},
      "dispatchToHousekeeping": true,
      "order": 1
    },
    {
      "trigger": {
        "type": "ACTIVITY_STATUS",
        "activityCode": "CHILD_QUALITY_OF_LIFE",
        "statusType": "CREATED"
      },
      "action": {
        "type": "SENDGRID_EMAIL",
        "templates": [
          {
            "emailTemplate": ${emails.proxyFinishQualityOfLifeReminder},
            "language": "en",
            "isDynamic": false
          }
        ],
        "linkedActivityCode": "CHILD_QUALITY_OF_LIFE",
        "pdfAttachments": []
      },
      "preconditionExpr": null,
      "cancelExpr": """user.studies["rarex"].forms["CHILD_QUALITY_OF_LIFE"].isStatus("COMPLETE")""",
      "delaySeconds": ${delay.seven_days},
      "dispatchToHousekeeping": true,
      "order": 1
    },

    ## patient quality of life reminder
    {
      "trigger": {
        "type": "ACTIVITY_STATUS",
        "activityCode": "PATIENT_QUALITY_OF_LIFE",
        "statusType": "CREATED"
      },
      "action": {
        "type": "SENDGRID_EMAIL",
        "templates": [
          {
            "emailTemplate": ${emails.proxyFinishQualityOfLifeReminder},
            "language": "en",
            "isDynamic": false
          }
        ],
        "linkedActivityCode": "PATIENT_QUALITY_OF_LIFE",
        "pdfAttachments": []
      },
      "preconditionExpr": null,
      "cancelExpr": """user.studies["rarex"].forms["PATIENT_QUALITY_OF_LIFE"].isStatus("COMPLETE")""",
      "delaySeconds": ${delay.two_days},
      "dispatchToHousekeeping": true,
      "order": 1
    },
    {
      "trigger": {
        "type": "ACTIVITY_STATUS",
        "activityCode": "PATIENT_QUALITY_OF_LIFE",
        "statusType": "CREATED"
      },
      "action": {
        "type": "SENDGRID_EMAIL",
        "templates": [
          {
            "emailTemplate": ${emails.proxyFinishQualityOfLifeReminder},
            "language": "en",
            "isDynamic": false
          }
        ],
        "linkedActivityCode": "PATIENT_QUALITY_OF_LIFE",
        "pdfAttachments": []
      },
      "preconditionExpr": null,
      "cancelExpr": """user.studies["rarex"].forms["PATIENT_QUALITY_OF_LIFE"].isStatus("COMPLETE")""",
      "delaySeconds": ${delay.seven_days},
      "dispatchToHousekeeping": true,
      "order": 1
    },

    # Answer copy
    {
      "trigger": {
        "type": "ACTIVITY_STATUS",
        "activityCode": "CONSENT",
        "statusType": "COMPLETE"
      },
      "action": {
        "type": "COPY_ANSWER",
        "copyConfigPairs": [
          {
            "source": {
              "type": "ANSWER",
              "questionStableId": "CONSENT_SIGNATURE_FIRST_NAME"
            },
            "target": {
              "type": "PARTICIPANT_PROFILE_FIRST_NAME"
            }
          },
          {
            "source": {
              "type": "ANSWER",
              "questionStableId": "CONSENT_SIGNATURE_LAST_NAME"
            },
            "target": {
              "type": "PARTICIPANT_PROFILE_LAST_NAME"
            }
          },
          {
            "source": {
              "type": "ANSWER",
              "questionStableId": "CONSENT_DOB"
            },
            "target": {
              "type": "PARTICIPANT_PROFILE_BIRTH_DATE"
            }
          }
        ]
      },
      "preconditionExpr": null,
      "cancelExpr": null,
      "maxOccurrencesPerUser": null,
      "delaySeconds": null,
      "dispatchToHousekeeping": false,
      "order": 1
    },
    {
      "trigger": {
        "type": "ACTIVITY_STATUS",
        "activityCode": "CONSENT_ASSENT",
        "statusType": "COMPLETE"
      },
      "action": {
        "type": "COPY_ANSWER",
        "copyConfigPairs": [
          {
            "source": {
              "type": "ANSWER",
              "questionStableId": "PARENTAL_ASSENT_CHILD_FIRSTNAME"
            },
            "target": {
              "type": "PARTICIPANT_PROFILE_FIRST_NAME"
            }
          },
          {
            "source": {
              "type": "ANSWER",
              "questionStableId": "PARENTAL_ASSENT_CHILD_LASTNAME"
            },
            "target": {
              "type": "PARTICIPANT_PROFILE_LAST_NAME"
            }
          },
          {
            "source": {
              "type": "ANSWER",
              "questionStableId": "PARENTAL_ASSENT_CHILD_DOB"
            },
            "target": {
              "type": "PARTICIPANT_PROFILE_BIRTH_DATE"
            }
          }
        ]
      },
      "preconditionExpr": null,
      "cancelExpr": null,
      "maxOccurrencesPerUser": null,
      "delaySeconds": null,
      "dispatchToHousekeeping": false,
      "order": 1
    },
    {
      "trigger": {
        "type": "ACTIVITY_STATUS",
        "activityCode": "PARENTAL_CONSENT",
        "statusType": "COMPLETE"
      },
      "action": {
        "type": "COPY_ANSWER",
        "copyConfigPairs": [
          {
            "source": {
              "type": "ANSWER",
              "questionStableId": "PARENTAL_CONSENT_CHILD_FIRSTNAME"
            },
            "target": {
              "type": "PARTICIPANT_PROFILE_FIRST_NAME"
            }
          },
          {
            "source": {
              "type": "ANSWER",
              "questionStableId": "PARENTAL_CONSENT_CHILD_LASTNAME"
            },
            "target": {
              "type": "PARTICIPANT_PROFILE_LAST_NAME"
            }
          },
          {
            "source": {
              "type": "ANSWER",
              "questionStableId": "PARENTAL_CONSENT_DOB"
            },
            "target": {
              "type": "PARTICIPANT_PROFILE_BIRTH_DATE"
            }
          }
        ]
      },
      "preconditionExpr": null,
      "cancelExpr": null,
      "maxOccurrencesPerUser": null,
      "delaySeconds": null,
      "dispatchToHousekeeping": false,
      "order": 1
    },
    {
      "trigger": {
        "type": "ACTIVITY_STATUS",
        "activityCode": "LAR_CONSENT_ASSENT",
        "statusType": "COMPLETE"
      },
      "action": {
        "type": "COPY_ANSWER",
        "copyConfigPairs": [
          {
            "source": {
              "type": "ANSWER",
              "questionStableId": "LAR_CONSENT_ASSENT_PATIENT_FIRSTNAME"
            },
            "target": {
              "type": "PARTICIPANT_PROFILE_FIRST_NAME"
            }
          },
          {
            "source": {
              "type": "ANSWER",
              "questionStableId": "LAR_CONSENT_ASSENT_PATIENT_LASTNAME"
            },
            "target": {
              "type": "PARTICIPANT_PROFILE_LAST_NAME"
            }
          },
          {
            "source": {
              "type": "ANSWER",
              "questionStableId": "LAR_CONSENT_ASSENT_PATIENT_DOB"
            },
            "target": {
              "type": "PARTICIPANT_PROFILE_BIRTH_DATE"
            }
          }
        ]
      },
      "preconditionExpr": null,
      "cancelExpr": null,
      "maxOccurrencesPerUser": null,
      "delaySeconds": null,
      "dispatchToHousekeeping": false,
      "order": 1
    },
    {
      "trigger": {
        "type": "ACTIVITY_STATUS",
        "activityCode": "LAR_CONSENT",
        "statusType": "COMPLETE"
      },
      "action": {
        "type": "COPY_ANSWER",
        "copyConfigPairs": [
          {
            "source": {
              "type": "ANSWER",
              "questionStableId": "LAR_CONSENT_PATIENT_FIRSTNAME"
            },
            "target": {
              "type": "PARTICIPANT_PROFILE_FIRST_NAME"
            }
          },
          {
            "source": {
              "type": "ANSWER",
              "questionStableId": "LAR_CONSENT_PATIENT_LASTNAME"
            },
            "target": {
              "type": "PARTICIPANT_PROFILE_LAST_NAME"
            }
          },
          {
            "source": {
              "type": "ANSWER",
              "questionStableId": "LAR_CONSENT_PATIENT_DOB"
            },
            "target": {
              "type": "PARTICIPANT_PROFILE_BIRTH_DATE"
            }
          }
        ]
      },
      "preconditionExpr": null,
      "cancelExpr": null,
      "maxOccurrencesPerUser": null,
      "delaySeconds": null,
      "dispatchToHousekeeping": false,
      "order": 1
    },
    {
      "trigger": {
        "type": "ACTIVITY_STATUS",
        "activityCode": "GENERAL_INFORMATION",
        "statusType": "CREATED"
      },
      "action": {
        "type": "COPY_ANSWER",
        "copyConfigPairs": [
          {
            "source": {
              "type": "ANSWER",
              "questionStableId": "CONSENT_SIGNATURE_FIRST_NAME"
            },
            "target": {
              "type": "ANSWER",
              "questionStableId": "PARTICIPANT_FIRST_NAME"
            }
          },
          {
            "source": {
              "type": "ANSWER",
              "questionStableId": "CONSENT_SIGNATURE_LAST_NAME"
            },
            "target": {
              "type": "ANSWER",
              "questionStableId": "PARTICIPANT_LAST_NAME"
            }
          },
          {
            "source": {
              "type": "ANSWER",
              "questionStableId": "CONSENT_SIGNATURE_MIDDLE_NAME"
            },
            "target": {
              "type": "ANSWER",
              "questionStableId": "PARTICIPANT_MIDDLE_NAME"
            }
          }
        ]
      },
      "preconditionExpr": """!user.studies["rarex"].forms["GENERAL_INFORMATION"].questions["PARTICIPANT_FIRST_NAME"].isAnswered()
        && user.studies["rarex"].forms["CONSENT"].hasInstance()
        && !user.studies["rarex"].forms["GENERAL_INFORMATION"].instances[latest].hasPreviousInstance()""",
      "cancelExpr": null,
      "maxOccurrencesPerUser": null,
      "delaySeconds": null,
      "dispatchToHousekeeping": false,
      "order": 1
    },
    {
      "trigger": {
        "type": "ACTIVITY_STATUS",
        "activityCode": "GENERAL_INFORMATION",
        "statusType": "CREATED"
      },
      "action": {
        "type": "COPY_ANSWER",
        "copyConfigPairs": [
          {
            "source": {
              "type": "ANSWER",
              "questionStableId": "PARENTAL_ASSENT_CHILD_FIRSTNAME"
            },
            "target": {
              "type": "ANSWER",
              "questionStableId": "PARTICIPANT_FIRST_NAME"
            }
          },
          {
            "source": {
              "type": "ANSWER",
              "questionStableId": "PARENTAL_ASSENT_CHILD_LASTNAME"
            },
            "target": {
              "type": "ANSWER",
              "questionStableId": "PARTICIPANT_LAST_NAME"
            }
          },
          {
            "source": {
              "type": "ANSWER",
              "questionStableId": "PARENTAL_ASSENT_CHILD_MIDDLENAME"
            },
            "target": {
              "type": "ANSWER",
              "questionStableId": "PARTICIPANT_MIDDLE_NAME"
            }
          },
          {
            "source": {
              "type": "ANSWER",
              "questionStableId": "PARENTAL_ASSENT_PARENT_FIRSTNAME"
            },
            "target": {
              "type": "ANSWER",
              "questionStableId": "OPERATOR_FIRST_NAME"
            }
          },
          {
            "source": {
              "type": "ANSWER",
              "questionStableId": "PARENTAL_ASSENT_PARENT_LASTNAME"
            },
            "target": {
              "type": "ANSWER",
              "questionStableId": "OPERATOR_LAST_NAME"
            }
          }
        ]
      },
      "preconditionExpr": """!user.studies["rarex"].forms["GENERAL_INFORMATION"].questions["PARTICIPANT_FIRST_NAME"].isAnswered()
        && user.studies["rarex"].forms["CONSENT_ASSENT"].hasInstance()
        && !user.studies["rarex"].forms["GENERAL_INFORMATION"].instances[latest].hasPreviousInstance()""",
      "cancelExpr": null,
      "maxOccurrencesPerUser": null,
      "delaySeconds": null,
      "dispatchToHousekeeping": false,
      "order": 1
    },
    {
      "trigger": {
        "type": "ACTIVITY_STATUS",
        "activityCode": "GENERAL_INFORMATION",
        "statusType": "CREATED"
      },
      "action": {
        "type": "COPY_ANSWER",
        "copyConfigPairs": [
          {
            "source": {
              "type": "ANSWER",
              "questionStableId": "PARENTAL_CONSENT_CHILD_FIRSTNAME"
            },
            "target": {
              "type": "ANSWER",
              "questionStableId": "PARTICIPANT_FIRST_NAME"
            }
          },
          {
            "source": {
              "type": "ANSWER",
              "questionStableId": "PARENTAL_CONSENT_CHILD_LASTNAME"
            },
            "target": {
              "type": "ANSWER",
              "questionStableId": "PARTICIPANT_LAST_NAME"
            }
          },
          {
            "source": {
              "type": "ANSWER",
              "questionStableId": "PARENTAL_CONSENT_CHILD_MIDDLENAME"
            },
            "target": {
              "type": "ANSWER",
              "questionStableId": "PARTICIPANT_MIDDLE_NAME"
            }
          },
          {
            "source": {
              "type": "ANSWER",
              "questionStableId": "PARENTAL_CONSENT_PARENT_FIRSTNAME"
            },
            "target": {
              "type": "ANSWER",
              "questionStableId": "OPERATOR_FIRST_NAME"
            }
          },
          {
            "source": {
              "type": "ANSWER",
              "questionStableId": "PARENTAL_CONSENT_PARENT_LASTNAME"
            },
            "target": {
              "type": "ANSWER",
              "questionStableId": "OPERATOR_LAST_NAME"
            }
          },
          {
            "source": {
              "type": "ANSWER",
              "questionStableId": "PARENTAL_CONSENT_PARENT_MIDDLENAME"
            },
            "target": {
              "type": "ANSWER",
              "questionStableId": "OPERATOR_MIDDLE_NAME"
            }
          }
        ]
      },
      "preconditionExpr": """!user.studies["rarex"].forms["GENERAL_INFORMATION"].questions["PARTICIPANT_FIRST_NAME"].isAnswered()
        && user.studies["rarex"].forms["PARENTAL_CONSENT"].hasInstance()
        && !user.studies["rarex"].forms["GENERAL_INFORMATION"].instances[latest].hasPreviousInstance()""",
      "cancelExpr": null,
      "maxOccurrencesPerUser": null,
      "delaySeconds": null,
      "dispatchToHousekeeping": false,
      "order": 1
    },
    {
      "trigger": {
        "type": "ACTIVITY_STATUS",
        "activityCode": "GENERAL_INFORMATION",
        "statusType": "CREATED"
      },
      "action": {
        "type": "COPY_ANSWER",
        "copyConfigPairs": [
          {
            "source": {
              "type": "ANSWER",
              "questionStableId": "LAR_CONSENT_PATIENT_FIRSTNAME"
            },
            "target": {
              "type": "ANSWER",
              "questionStableId": "PARTICIPANT_FIRST_NAME"
            }
          },
          {
            "source": {
              "type": "ANSWER",
              "questionStableId": "LAR_CONSENT_PATIENT_LASTNAME"
            },
            "target": {
              "type": "ANSWER",
              "questionStableId": "PARTICIPANT_LAST_NAME"
            }
          },
          {
            "source": {
              "type": "ANSWER",
              "questionStableId": "LAR_CONSENT_PATIENT_MIDDLENAME"
            },
            "target": {
              "type": "ANSWER",
              "questionStableId": "PARTICIPANT_MIDDLE_NAME"
            }
          },
          {
            "source": {
              "type": "ANSWER",
              "questionStableId": "LAR_CONSENT_LAR_FIRSTNAME"
            },
            "target": {
              "type": "ANSWER",
              "questionStableId": "OPERATOR_FIRST_NAME"
            }
          },
          {
            "source": {
              "type": "ANSWER",
              "questionStableId": "LAR_CONSENT_LAR_LASTNAME"
            },
            "target": {
              "type": "ANSWER",
              "questionStableId": "OPERATOR_LAST_NAME"
            }
          },
          {
            "source": {
              "type": "ANSWER",
              "questionStableId": "LAR_CONSENT_LAR_MIDDLENAME"
            },
            "target": {
              "type": "ANSWER",
              "questionStableId": "OPERATOR_MIDDLE_NAME"
            }
          }
        ]
      },
      "preconditionExpr": """!user.studies["rarex"].forms["GENERAL_INFORMATION"].questions["PARTICIPANT_FIRST_NAME"].isAnswered()
        && user.studies["rarex"].forms["LAR_CONSENT"].hasInstance()
        && !user.studies["rarex"].forms["GENERAL_INFORMATION"].instances[latest].hasPreviousInstance()""",
      "cancelExpr": null,
      "maxOccurrencesPerUser": null,
      "delaySeconds": null,
      "dispatchToHousekeeping": false,
      "order": 1
    },
    {
      "trigger": {
        "type": "ACTIVITY_STATUS",
        "activityCode": "GENERAL_INFORMATION",
        "statusType": "CREATED"
      },
      "action": {
        "type": "COPY_ANSWER",
        "copyConfigPairs": [
          {
            "source": {
              "type": "ANSWER",
              "questionStableId": "LAR_CONSENT_ASSENT_PATIENT_FIRSTNAME"
            },
            "target": {
              "type": "ANSWER",
              "questionStableId": "PARTICIPANT_FIRST_NAME"
            }
          },
          {
            "source": {
              "type": "ANSWER",
              "questionStableId": "LAR_CONSENT_ASSENT_PATIENT_LASTNAME"
            },
            "target": {
              "type": "ANSWER",
              "questionStableId": "PARTICIPANT_LAST_NAME"
            }
          },
          {
            "source": {
              "type": "ANSWER",
              "questionStableId": "LAR_CONSENT_ASSENT_PATIENT_MIDDLENAME"
            },
            "target": {
              "type": "ANSWER",
              "questionStableId": "PARTICIPANT_MIDDLE_NAME"
            }
          },
          {
            "source": {
              "type": "ANSWER",
              "questionStableId": "LAR_CONSENT_ASSENT_PARENT_FIRSTNAME"
            },
            "target": {
              "type": "ANSWER",
              "questionStableId": "OPERATOR_FIRST_NAME"
            }
          },
          {
            "source": {
              "type": "ANSWER",
              "questionStableId": "LAR_CONSENT_ASSENT_PARENT_LASTNAME"
            },
            "target": {
              "type": "ANSWER",
              "questionStableId": "OPERATOR_LAST_NAME"
            }
          }
        ]
      },
      "preconditionExpr": """!user.studies["rarex"].forms["GENERAL_INFORMATION"].questions["PARTICIPANT_FIRST_NAME"].isAnswered()
        && user.studies["rarex"].forms["LAR_CONSENT_ASSENT"].hasInstance()
        && !user.studies["rarex"].forms["GENERAL_INFORMATION"].instances[latest].hasPreviousInstance()""",
      "cancelExpr": null,
      "maxOccurrencesPerUser": null,
      "delaySeconds": null,
      "dispatchToHousekeeping": false,
      "order": 1
    },
    {
      "trigger": {
        "type": "ACTIVITY_STATUS",
        "activityCode": "HEALTH_AND_DEVELOPMENT",
        "statusType": "COMPLETE"
      },
      "action": {
        "type": "COPY_ANSWER",
        "copyConfigPairs": [
          {
            "source": {
              "type": "ANSWER",
              "questionStableId": "HD_GENETIC_TEST_REASON_PATIENT"
            },
            "target": {
              "type": "ANSWER",
              "questionStableId": "HD_GENETIC_TEST_REASON"
            }
          }
        ]
      },
      "preconditionExpr": """!user.studies["rarex"].forms["HEALTH_AND_DEVELOPMENT"].questions["HD_GENETIC_TEST_REASON_PATIENT"].isAnswered()""",
      "cancelExpr": null,
      "maxOccurrencesPerUser": null,
      "delaySeconds": null,
      "dispatchToHousekeeping": false,
      "order": 1
    },
    {
      "trigger": {
        "type": "ACTIVITY_STATUS",
        "activityCode": "HEALTH_AND_DEVELOPMENT",
        "statusType": "COMPLETE"
      },
      "action": {
        "type": "COPY_ANSWER",
        "copyConfigPairs": [
          {
            "source": {
              "type": "ANSWER",
              "questionStableId": "HD_GENETIC_TEST_REPORT_PATIENT"
            },
            "target": {
              "type": "ANSWER",
              "questionStableId": "HD_GENETIC_TEST_REPORT"
            }
          }
        ]
      },
      "preconditionExpr": """!user.studies["rarex"].forms["HEALTH_AND_DEVELOPMENT"].questions["HD_GENETIC_TEST_REPORT_PATIENT"].isAnswered()""",
      "cancelExpr": null,
      "maxOccurrencesPerUser": null,
      "delaySeconds": null,
      "dispatchToHousekeeping": false,
      "order": 1
    },

    # Instance copy
    {
      "trigger": {
        "type": "ACTIVITY_STATUS",
        "activityCode": "DATA_SHARING",
        "statusType": "CREATED"
      },
      "action": {
        "type": "COPY_ANSWER",
        "copyFromPreviousInstance": true,
        "copyConfigPairs": []
      }
      "order": 1,
      "dispatchToHousekeeping": false
    },
    {
      "trigger": {
        "type": "ACTIVITY_STATUS",
        "activityCode": "GENERAL_INFORMATION",
        "statusType": "CREATED"
      },
      "action": {
        "type": "COPY_ANSWER",
        "copyFromPreviousInstance": true,
        "copyConfigPairs": []
      }
      "order": 1,
      "dispatchToHousekeeping": false
    },
    {
      "trigger": {
        "type": "ACTIVITY_STATUS",
        "activityCode": "FAMILY_MEMBER",
        "statusType": "CREATED"
      },
      "action": {
        "type": "COPY_ANSWER",
        "copyFromPreviousInstance": true,
        "copyConfigPairs": []
      }
      "order": 1,
      "dispatchToHousekeeping": false
    },
    {
      "trigger": {
        "type": "ACTIVITY_STATUS",
        "activityCode": "LEGACY",
        "statusType": "CREATED"
      },
      "action": {
        "type": "COPY_ANSWER",
        "copyFromPreviousInstance": true,
        "copyConfigPairs": []
      }
      "order": 1,
      "dispatchToHousekeeping": false
    },
    {
      "trigger": {
        "type": "ACTIVITY_STATUS",
        "activityCode": "HEALTH_AND_DEVELOPMENT",
        "statusType": "CREATED"
      },
      "action": {
        "type": "COPY_ANSWER",
        "copyFromPreviousInstance": true,
        "copyConfigPairs": []
      }
      "order": 1,
      "dispatchToHousekeeping": false
    },
    {
      "trigger": {
        "type": "ACTIVITY_STATUS",
        "activityCode": "QUALITY_OF_LIFE",
        "statusType": "CREATED"
      },
      "action": {
        "type": "COPY_ANSWER",
        "copyFromPreviousInstance": true,
        "copyConfigPairs": []
      }
      "order": 1,
      "dispatchToHousekeeping": false
    },
    {
      "trigger": {
        "type": "ACTIVITY_STATUS",
        "activityCode": "CHILD_QUALITY_OF_LIFE",
        "statusType": "CREATED"
      },
      "action": {
        "type": "COPY_ANSWER",
        "copyFromPreviousInstance": true,
        "copyConfigPairs": []
      }
      "order": 1,
      "dispatchToHousekeeping": false
    },
    {
      "trigger": {
        "type": "ACTIVITY_STATUS",
        "activityCode": "PATIENT_QUALITY_OF_LIFE",
        "statusType": "CREATED"
      },
      "action": {
        "type": "COPY_ANSWER",
        "copyFromPreviousInstance": true,
        "copyConfigPairs": []
      }
      "order": 1,
      "dispatchToHousekeeping": false
    },

    # announcement events
    {
      "trigger": {
        "type": "ACTIVITY_STATUS",
        "activityCode": "LEGACY",
        "statusType": "COMPLETE"
      },
      "action": {
        "type": "ANNOUNCEMENT",
        "msgTemplate": { include required("snippets/thank-you-announcement-msg.conf") }
      },
      "dispatchToHousekeeping": false,
      "order": 2
    },
    {
      "trigger": {
        "type": "ACTIVITY_STATUS",
        "activityCode": "FAMILY_MEMBER",
        "statusType": "COMPLETE"
      },
      "action": {
        "type": "ANNOUNCEMENT",
        "msgTemplate": { include required("snippets/thank-you-announcement-msg.conf") }
      },
      "dispatchToHousekeeping": false,
      "order": 2
    },


    //    ##Legacy completion reminder
    //    {
    //      "trigger": {
    //        "type": "ACTIVITY_STATUS",
    //        "activityCode": "LEGACY",
    //        "statusType": "CREATED"
    //      },
    //      "action": {
    //        "type": "SENDGRID_EMAIL",
    //        "templates": [
    //          {
    //            "emailTemplate": ${emails.finishLegacyReminder},
    //            "language": "en",
    //            "isDynamic": false
    //          }
    //        ],
    //        "pdfAttachments": []
    //      },
    //      "cancelExpr": """(user.studies["rarex"].forms["LEGACY"].hasInstance()
    //        && user.studies["rarex"].forms["LEGACY"].isStatus("COMPLETE"))""",
    //      "delaySeconds": 604800, #1 min, for testing purspose
    //      "dispatchToHousekeeping": true,
    //      "order": 1
    //    }
  ]
}
