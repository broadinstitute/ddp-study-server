tenant:
  default_directory: Username-Password-Authentication

rules:
  - name: Register User in Pepper
    script: ../register-user-in-pepper.js
    stage: login_success
    enabled: true
    order: 1

pages:
  - name: login
    html: ./pages/login.html
    enabled: true
  - name: password_reset
    html: ./pages/password_reset.html
    enabled: true

emailTemplates:
  - template: reset_email
    body: ./emails/change_password.html
    from: TestBoston <##STUDY_EMAIL##>
    resultUrl: '##SERVER_BASE_URL##/pepper/v1/post-password-reset?clientId={{ application.clientID }}'
    subject: TestBoston password reset
    urlLifetimeInSeconds: 432000
    syntax: liquid
    enabled: true

clients:
  - name: testboston-app-client
    app_type: spa
    callbacks:
      - '##BASE_URL##/login-landing'
      ##LOCALHOST_CALLBACKS##
    allowed_logout_urls:
      - '##BASE_URL##'
      - '##BASE_URL##/session-expired'
      ##LOCALHOST_LOGOUTS##
    web_origins:
      - '##BASE_URL##'
      ##LOCALHOST_ORIGINS##
    client_metadata:
      study: testboston

  - name: testboston-crc-client
    app_type: spa
    callbacks:
      - '##BASE_URL##/admin-login-landing'
      ##LOCALHOST_ADMIN_CALLBACKS##
    allowed_logout_urls:
      - '##BASE_URL##'
      - '##BASE_URL##/session-expired'
      ##LOCALHOST_LOGOUTS##
    web_origins:
      - '##BASE_URL##'
      ##LOCALHOST_ORIGINS##
    client_metadata:
      study: testboston
